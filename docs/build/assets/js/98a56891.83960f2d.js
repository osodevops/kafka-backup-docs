"use strict";(globalThis.webpackChunkkafka_backup_docs=globalThis.webpackChunkkafka_backup_docs||[]).push([[2490],{5229:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"guides/performance-tuning","title":"Performance Tuning","description":"Optimize OSO Kafka Backup throughput and resource usage","source":"@site/docs/guides/performance-tuning.md","sourceDirName":"guides","slug":"/guides/performance-tuning","permalink":"/guides/performance-tuning","draft":false,"unlisted":false,"editUrl":"https://github.com/osodevops/kafka-backup-docs/tree/main/docs/docs/guides/performance-tuning.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Performance Tuning","description":"Optimize OSO Kafka Backup throughput and resource usage","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Offset Management","permalink":"/guides/offset-management"},"next":{"title":"Security Setup","permalink":"/guides/security-setup"}}');var i=s(4848),c=s(8453);const l={title:"Performance Tuning",description:"Optimize OSO Kafka Backup throughput and resource usage",sidebar_position:4},t="Performance Tuning",a={},d=[{value:"Performance Overview",id:"performance-overview",level:2},{value:"Measuring Performance",id:"measuring-performance",level:2},{value:"During Backup",id:"during-backup",level:3},{value:"After Backup",id:"after-backup",level:3},{value:"Backup Performance Tuning",id:"backup-performance-tuning",level:2},{value:"Compression Settings",id:"compression-settings",level:3},{value:"Segment Size",id:"segment-size",level:3},{value:"Parallelism",id:"parallelism",level:3},{value:"Checkpoint Interval",id:"checkpoint-interval",level:3},{value:"Restore Performance Tuning",id:"restore-performance-tuning",level:2},{value:"Concurrent Partitions",id:"concurrent-partitions",level:3},{value:"Batch Size",id:"batch-size",level:3},{value:"Rate Limiting",id:"rate-limiting",level:3},{value:"Storage Performance",id:"storage-performance",level:2},{value:"Filesystem",id:"filesystem",level:3},{value:"S3",id:"s3",level:3},{value:"Azure Blob",id:"azure-blob",level:3},{value:"GCS",id:"gcs",level:3},{value:"Kafka Connection Tuning",id:"kafka-connection-tuning",level:2},{value:"Consumer Configuration (Backup)",id:"consumer-configuration-backup",level:3},{value:"Producer Configuration (Restore)",id:"producer-configuration-restore",level:3},{value:"Memory Optimization",id:"memory-optimization",level:2},{value:"Estimating Memory Usage",id:"estimating-memory-usage",level:3},{value:"Reducing Memory",id:"reducing-memory",level:3},{value:"Kubernetes Resources",id:"kubernetes-resources",level:3},{value:"CPU Optimization",id:"cpu-optimization",level:2},{value:"Compression CPU Usage",id:"compression-cpu-usage",level:3},{value:"Multi-Core Utilization",id:"multi-core-utilization",level:3},{value:"Network Optimization",id:"network-optimization",level:2},{value:"Bandwidth Estimation",id:"bandwidth-estimation",level:3},{value:"Reducing Network Usage",id:"reducing-network-usage",level:3},{value:"Benchmarking",id:"benchmarking",level:2},{value:"Backup Benchmark",id:"backup-benchmark",level:3},{value:"Restore Benchmark",id:"restore-benchmark",level:3},{value:"Performance Checklist",id:"performance-checklist",level:2},{value:"Pre-Backup",id:"pre-backup",level:3},{value:"During Backup",id:"during-backup-1",level:3},{value:"Post-Backup",id:"post-backup",level:3},{value:"Troubleshooting Performance",id:"troubleshooting-performance",level:2},{value:"Slow Backup",id:"slow-backup",level:3},{value:"Slow Restore",id:"slow-restore",level:3},{value:"High Memory Usage",id:"high-memory-usage",level:3},{value:"Configuration Templates",id:"configuration-templates",level:2},{value:"High Throughput (Large Cluster)",id:"high-throughput-large-cluster",level:3},{value:"Balanced (Default)",id:"balanced-default",level:3},{value:"Low Resource",id:"low-resource",level:3},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"performance-tuning",children:"Performance Tuning"})}),"\n",(0,i.jsx)(n.p,{children:"Optimize backup and restore operations for maximum throughput and efficiency."}),"\n",(0,i.jsx)(n.h2,{id:"performance-overview",children:"Performance Overview"}),"\n",(0,i.jsx)(n.p,{children:"OSO Kafka Backup is built in Rust for high performance:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Throughput"}),": 100+ MB/s per partition"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Memory efficient"}),": Streaming processing, minimal buffering"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CPU efficient"}),": Native compilation, zero-copy where possible"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"measuring-performance",children:"Measuring Performance"}),"\n",(0,i.jsx)(n.h3,{id:"during-backup",children:"During Backup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kafka-backup -v backup --config backup.yaml\n"})}),"\n",(0,i.jsx)(n.p,{children:"Output includes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"[INFO] Backup completed\n[INFO] Summary:\n  Records: 2,456,789\n  Duration: 4m 23s\n  Throughput: 9,346 records/sec\n  Throughput: 45.2 MB/sec (uncompressed)\n  Compression ratio: 4.9x\n"})}),"\n",(0,i.jsx)(n.h3,{id:"after-backup",children:"After Backup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kafka-backup status \\\n  --path /data/backups \\\n  --backup-id production-backup\n"})}),"\n",(0,i.jsx)(n.h2,{id:"backup-performance-tuning",children:"Backup Performance Tuning"}),"\n",(0,i.jsx)(n.h3,{id:"compression-settings",children:"Compression Settings"}),"\n",(0,i.jsx)(n.p,{children:"Compression significantly impacts both storage costs and performance."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Algorithm"}),(0,i.jsx)(n.th,{children:"Speed"}),(0,i.jsx)(n.th,{children:"Ratio"}),(0,i.jsx)(n.th,{children:"Use Case"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"none"})}),(0,i.jsx)(n.td,{children:"Fastest"}),(0,i.jsx)(n.td,{children:"1x"}),(0,i.jsx)(n.td,{children:"Pre-compressed data"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"lz4"})}),(0,i.jsx)(n.td,{children:"Very Fast"}),(0,i.jsx)(n.td,{children:"2-3x"}),(0,i.jsx)(n.td,{children:"Speed priority"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"zstd"})," (level 1-3)"]}),(0,i.jsx)(n.td,{children:"Fast"}),(0,i.jsx)(n.td,{children:"3-4x"}),(0,i.jsx)(n.td,{children:"Balanced (default)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"zstd"})," (level 4-9)"]}),(0,i.jsx)(n.td,{children:"Moderate"}),(0,i.jsx)(n.td,{children:"4-6x"}),(0,i.jsx)(n.td,{children:"Storage priority"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"zstd"})," (level 10+)"]}),(0,i.jsx)(n.td,{children:"Slow"}),(0,i.jsx)(n.td,{children:"5-7x"}),(0,i.jsx)(n.td,{children:"Archive"})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"backup:\n  compression: zstd\n  compression_level: 3  # Balanced performance\n"})}),"\n",(0,i.jsx)(n.h3,{id:"segment-size",children:"Segment Size"}),"\n",(0,i.jsx)(n.p,{children:"Larger segments mean fewer storage operations but more memory usage:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"backup:\n  segment_max_bytes: 268435456     # 256 MB (larger segments)\n  segment_max_interval_ms: 120000  # Roll every 2 minutes\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Segment Size"}),(0,i.jsx)(n.th,{children:"Pros"}),(0,i.jsx)(n.th,{children:"Cons"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"64 MB"}),(0,i.jsx)(n.td,{children:"Lower memory, frequent checkpoints"}),(0,i.jsx)(n.td,{children:"More S3 PUTs"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"128 MB"}),(0,i.jsx)(n.td,{children:"Balanced (default)"}),(0,i.jsx)(n.td,{children:"-"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"256 MB"}),(0,i.jsx)(n.td,{children:"Fewer storage operations"}),(0,i.jsx)(n.td,{children:"Higher memory"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"512 MB"}),(0,i.jsx)(n.td,{children:"Minimal storage ops"}),(0,i.jsx)(n.td,{children:"High memory, delayed checkpoints"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"parallelism",children:"Parallelism"}),"\n",(0,i.jsx)(n.p,{children:"Control concurrent partition processing:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"backup:\n  max_concurrent_partitions: 8  # Default: 4\n"})}),"\n",(0,i.jsx)(n.p,{children:"Guidelines:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"2-4 partitions: Single-core systems"}),"\n",(0,i.jsx)(n.li,{children:"4-8 partitions: Multi-core systems"}),"\n",(0,i.jsx)(n.li,{children:"8-16 partitions: High-performance systems"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"checkpoint-interval",children:"Checkpoint Interval"}),"\n",(0,i.jsx)(n.p,{children:"Balance durability vs. performance:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"backup:\n  checkpoint_interval_secs: 60  # Less frequent = faster\n  sync_interval_secs: 120       # Storage sync interval\n"})}),"\n",(0,i.jsx)(n.h2,{id:"restore-performance-tuning",children:"Restore Performance Tuning"}),"\n",(0,i.jsx)(n.h3,{id:"concurrent-partitions",children:"Concurrent Partitions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"restore:\n  max_concurrent_partitions: 8  # Increase for faster restore\n"})}),"\n",(0,i.jsx)(n.h3,{id:"batch-size",children:"Batch Size"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"restore:\n  produce_batch_size: 5000  # Records per produce batch (default: 1000)\n"})}),"\n",(0,i.jsx)(n.p,{children:"Larger batches = higher throughput but more memory."}),"\n",(0,i.jsx)(n.h3,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,i.jsx)(n.p,{children:"Avoid overwhelming target cluster:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"restore:\n  rate_limit_records_per_sec: 100000  # Cap at 100k records/sec\n  rate_limit_bytes_per_sec: 50000000  # Cap at 50 MB/sec\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Set to ",(0,i.jsx)(n.code,{children:"null"})," for unlimited."]}),"\n",(0,i.jsx)(n.h2,{id:"storage-performance",children:"Storage Performance"}),"\n",(0,i.jsx)(n.h3,{id:"filesystem",children:"Filesystem"}),"\n",(0,i.jsx)(n.p,{children:"For local/NFS storage:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use SSDs for backup storage"}),"\n",(0,i.jsx)(n.li,{children:"Use XFS or ext4 filesystems"}),"\n",(0,i.jsxs)(n.li,{children:["Mount with ",(0,i.jsx)(n.code,{children:"noatime"})," option"]}),"\n",(0,i.jsx)(n.li,{children:"Ensure adequate I/O bandwidth"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check I/O performance\nfio --name=test --rw=write --bs=128k --size=1G --runtime=30\n"})}),"\n",(0,i.jsx)(n.h3,{id:"s3",children:"S3"}),"\n",(0,i.jsx)(n.p,{children:"Optimize S3 performance:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use regional buckets"})," - Same region as Kafka cluster"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable Transfer Acceleration"})," - For cross-region backups"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use larger segments"})," - Reduce PUT requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use VPC endpoints"})," - Reduce latency"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"storage:\n  backend: s3\n  bucket: my-kafka-backups\n  region: us-west-2  # Same as Kafka cluster\n  # endpoint: https://s3-accelerate.amazonaws.com  # For acceleration\n"})}),"\n",(0,i.jsx)(n.h3,{id:"azure-blob",children:"Azure Blob"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"storage:\n  backend: azure\n  container: kafka-backups\n  # Use Premium block blob for high performance\n"})}),"\n",(0,i.jsx)(n.h3,{id:"gcs",children:"GCS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"storage:\n  backend: gcs\n  bucket: my-kafka-backups\n  # Use regional bucket in same region as Kafka\n"})}),"\n",(0,i.jsx)(n.h2,{id:"kafka-connection-tuning",children:"Kafka Connection Tuning"}),"\n",(0,i.jsx)(n.h3,{id:"consumer-configuration-backup",children:"Consumer Configuration (Backup)"}),"\n",(0,i.jsx)(n.p,{children:"The backup process uses Kafka consumer settings internally. These are optimized by default:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"fetch.min.bytes"}),": 1 MB"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"fetch.max.wait.ms"}),": 500 ms"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"max.partition.fetch.bytes"}),": 10 MB"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"producer-configuration-restore",children:"Producer Configuration (Restore)"}),"\n",(0,i.jsx)(n.p,{children:"Restore operations use optimized producer settings:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"batch.size"}),": 1 MB"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"linger.ms"}),": 5 ms"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"buffer.memory"}),": 64 MB"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"memory-optimization",children:"Memory Optimization"}),"\n",(0,i.jsx)(n.h3,{id:"estimating-memory-usage",children:"Estimating Memory Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Memory \u2248 (concurrent_partitions \xd7 segment_size) + overhead\n\nExample:\n  8 partitions \xd7 128 MB = 1 GB segment buffers\n  + 256 MB overhead\n  = ~1.25 GB total\n"})}),"\n",(0,i.jsx)(n.h3,{id:"reducing-memory",children:"Reducing Memory"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"backup:\n  max_concurrent_partitions: 4   # Reduce parallelism\n  segment_max_bytes: 67108864    # 64 MB segments\n"})}),"\n",(0,i.jsx)(n.h3,{id:"kubernetes-resources",children:"Kubernetes Resources"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"resources:\n  requests:\n    memory: 1Gi\n    cpu: 500m\n  limits:\n    memory: 2Gi\n    cpu: 2000m\n"})}),"\n",(0,i.jsx)(n.h2,{id:"cpu-optimization",children:"CPU Optimization"}),"\n",(0,i.jsx)(n.h3,{id:"compression-cpu-usage",children:"Compression CPU Usage"}),"\n",(0,i.jsx)(n.p,{children:"Compression is the main CPU consumer:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Compression"}),(0,i.jsx)(n.th,{children:"CPU Usage"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"none"}),(0,i.jsx)(n.td,{children:"Minimal"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"lz4"}),(0,i.jsx)(n.td,{children:"Low"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"zstd level 1-3"}),(0,i.jsx)(n.td,{children:"Moderate"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"zstd level 4-9"}),(0,i.jsx)(n.td,{children:"High"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"zstd level 10+"}),(0,i.jsx)(n.td,{children:"Very High"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"multi-core-utilization",children:"Multi-Core Utilization"}),"\n",(0,i.jsx)(n.p,{children:"Increase parallelism to use more cores:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"backup:\n  max_concurrent_partitions: 8  # Use 8 cores\n"})}),"\n",(0,i.jsx)(n.h2,{id:"network-optimization",children:"Network Optimization"}),"\n",(0,i.jsx)(n.h3,{id:"bandwidth-estimation",children:"Bandwidth Estimation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Bandwidth = throughput \xd7 (1 + compression overhead)\n\nExample:\n  50 MB/s uncompressed data\n  4x compression ratio\n  = ~12.5 MB/s to storage\n  + Kafka read bandwidth\n"})}),"\n",(0,i.jsx)(n.h3,{id:"reducing-network-usage",children:"Reducing Network Usage"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable compression"})," - Reduces storage bandwidth"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use local storage"})," - Eliminate network for storage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Same-region resources"})," - Kafka, backup, storage in same region"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"benchmarking",children:"Benchmarking"}),"\n",(0,i.jsx)(n.h3,{id:"backup-benchmark",children:"Backup Benchmark"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Time a backup\ntime kafka-backup backup --config backup.yaml\n\n# With metrics\nkafka-backup -v backup --config backup.yaml 2>&1 | tee backup.log\ngrep -E "(Throughput|Duration|Records)" backup.log\n'})}),"\n",(0,i.jsx)(n.h3,{id:"restore-benchmark",children:"Restore Benchmark"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Validate without executing (check estimated records)\nkafka-backup validate-restore --config restore.yaml\n\n# Time actual restore\ntime kafka-backup restore --config restore.yaml\n"})}),"\n",(0,i.jsx)(n.h2,{id:"performance-checklist",children:"Performance Checklist"}),"\n",(0,i.jsx)(n.h3,{id:"pre-backup",children:"Pre-Backup"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Kafka cluster has available bandwidth"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Storage has sufficient space and I/O"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Network path is optimized (same region/VPC)"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Compression level matches use case"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"during-backup-1",children:"During Backup"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitor Kafka consumer lag"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitor storage write latency"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitor memory usage"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitor CPU usage"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"post-backup",children:"Post-Backup"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verify backup integrity"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Check compression ratio"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Review throughput metrics"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Optimize for next backup"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting-performance",children:"Troubleshooting Performance"}),"\n",(0,i.jsx)(n.h3,{id:"slow-backup",children:"Slow Backup"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptoms"}),": Low throughput, long duration"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Causes and Solutions"}),":"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Cause"}),(0,i.jsx)(n.th,{children:"Solution"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"High compression level"}),(0,i.jsxs)(n.td,{children:["Reduce ",(0,i.jsx)(n.code,{children:"compression_level"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Low parallelism"}),(0,i.jsxs)(n.td,{children:["Increase ",(0,i.jsx)(n.code,{children:"max_concurrent_partitions"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Slow storage"}),(0,i.jsx)(n.td,{children:"Use faster storage, increase segment size"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Network bottleneck"}),(0,i.jsx)(n.td,{children:"Use same-region storage"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Kafka throttling"}),(0,i.jsx)(n.td,{children:"Check broker load"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"slow-restore",children:"Slow Restore"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptoms"}),": Low restore throughput"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Causes and Solutions"}),":"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Cause"}),(0,i.jsx)(n.th,{children:"Solution"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Target cluster overloaded"}),(0,i.jsx)(n.td,{children:"Add rate limiting, reduce parallelism"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Small batch size"}),(0,i.jsxs)(n.td,{children:["Increase ",(0,i.jsx)(n.code,{children:"produce_batch_size"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Low parallelism"}),(0,i.jsxs)(n.td,{children:["Increase ",(0,i.jsx)(n.code,{children:"max_concurrent_partitions"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Decompression overhead"}),(0,i.jsx)(n.td,{children:"Pre-decompress in pipeline"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"high-memory-usage",children:"High Memory Usage"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptoms"}),": OOM errors, memory pressure"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Reduce ",(0,i.jsx)(n.code,{children:"max_concurrent_partitions"})]}),"\n",(0,i.jsxs)(n.li,{children:["Reduce ",(0,i.jsx)(n.code,{children:"segment_max_bytes"})]}),"\n",(0,i.jsx)(n.li,{children:"Increase container/process memory limits"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configuration-templates",children:"Configuration Templates"}),"\n",(0,i.jsx)(n.h3,{id:"high-throughput-large-cluster",children:"High Throughput (Large Cluster)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"backup:\n  compression: lz4                    # Fast compression\n  max_concurrent_partitions: 16       # High parallelism\n  segment_max_bytes: 268435456        # 256 MB segments\n  checkpoint_interval_secs: 120       # Less frequent checkpoints\n"})}),"\n",(0,i.jsx)(n.h3,{id:"balanced-default",children:"Balanced (Default)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"backup:\n  compression: zstd\n  compression_level: 3\n  max_concurrent_partitions: 4\n  segment_max_bytes: 134217728        # 128 MB\n  checkpoint_interval_secs: 30\n"})}),"\n",(0,i.jsx)(n.h3,{id:"low-resource",children:"Low Resource"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"backup:\n  compression: zstd\n  compression_level: 1                # Minimal compression\n  max_concurrent_partitions: 2        # Low parallelism\n  segment_max_bytes: 67108864         # 64 MB segments\n  checkpoint_interval_secs: 60\n"})}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../deployment",children:"Deployment Guide"})," - Production deployment"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../reference/config-yaml",children:"Configuration Reference"})," - All options"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../reference/metrics",children:"Metrics Reference"})," - Monitor performance"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var r=s(6540);const i={},c=r.createContext(i);function l(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);