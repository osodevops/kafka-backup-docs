"use strict";(globalThis.webpackChunkkafka_backup_docs=globalThis.webpackChunkkafka_backup_docs||[]).push([[1692],{7401:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"use-cases/disaster-recovery","title":"Disaster Recovery","description":"Use OSO Kafka Backup for zero-downtime disaster recovery","source":"@site/docs/use-cases/disaster-recovery.md","sourceDirName":"use-cases","slug":"/use-cases/disaster-recovery","permalink":"/use-cases/disaster-recovery","draft":false,"unlisted":false,"editUrl":"https://github.com/osodevops/kafka-backup-docs/tree/main/docs/docs/use-cases/disaster-recovery.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Disaster Recovery","description":"Use OSO Kafka Backup for zero-downtime disaster recovery","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"First Backup Tutorial","permalink":"/getting-started/first-backup"},"next":{"title":"Compliance & Audit","permalink":"/use-cases/compliance-audit"}}');var i=r(4848),t=r(8453);const c={title:"Disaster Recovery",description:"Use OSO Kafka Backup for zero-downtime disaster recovery",sidebar_position:1},l="Disaster Recovery",o={},a=[{value:"The Problem",id:"the-problem",level:2},{value:"The Solution",id:"the-solution",level:2},{value:"DR Architecture",id:"dr-architecture",level:2},{value:"DR Scenarios",id:"dr-scenarios",level:2},{value:"Scenario 1: Regional Failure",id:"scenario-1-regional-failure",level:3},{value:"Scenario 2: Data Corruption",id:"scenario-2-data-corruption",level:3},{value:"Scenario 3: Accidental Topic Deletion",id:"scenario-3-accidental-topic-deletion",level:3},{value:"Scenario 4: Ransomware Attack",id:"scenario-4-ransomware-attack",level:3},{value:"Implementation",id:"implementation",level:2},{value:"Step 1: Configure Automated Backups",id:"step-1-configure-automated-backups",level:3},{value:"Step 2: Schedule Backups",id:"step-2-schedule-backups",level:3},{value:"Step 3: Create DR Runbook",id:"step-3-create-dr-runbook",level:3},{value:"Step 4: Test DR Regularly",id:"step-4-test-dr-regularly",level:3},{value:"RTO/RPO Planning",id:"rtorpo-planning",level:2},{value:"Recovery Time Objective (RTO)",id:"recovery-time-objective-rto",level:3},{value:"Recovery Point Objective (RPO)",id:"recovery-point-objective-rpo",level:3},{value:"Cost Analysis",id:"cost-analysis",level:2},{value:"Replication vs. Backup",id:"replication-vs-backup",level:3},{value:"Backup Storage Costs",id:"backup-storage-costs",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Backup Strategy",id:"backup-strategy",level:3},{value:"DR Readiness",id:"dr-readiness",level:3},{value:"Consumer Recovery",id:"consumer-recovery",level:2},{value:"Option 1: Reprocess All",id:"option-1-reprocess-all",level:3},{value:"Option 2: Resume from Position",id:"option-2-resume-from-position",level:3},{value:"Option 3: Timestamp-Based Resume",id:"option-3-timestamp-based-resume",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"disaster-recovery",children:"Disaster Recovery"})}),"\n",(0,i.jsx)(n.p,{children:"Implement robust disaster recovery for your Kafka infrastructure with OSO Kafka Backup."}),"\n",(0,i.jsx)(n.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,i.jsx)(n.p,{children:"Kafka replication (MirrorMaker, Confluent Replicator) provides high availability but has limitations:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Challenge"}),(0,i.jsx)(n.th,{children:"Impact"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Active-active complexity"})}),(0,i.jsx)(n.td,{children:"Dual writes, conflict resolution"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Data corruption propagates"})}),(0,i.jsx)(n.td,{children:"Replication copies bad data too"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"No point-in-time recovery"})}),(0,i.jsx)(n.td,{children:'Can\'t go back to "before the incident"'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Topic deletion is permanent"})}),(0,i.jsx)(n.td,{children:"Accidentally deleted topics can't be recovered"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"High cross-region costs"})}),(0,i.jsx)(n.td,{children:"Continuous replication is expensive"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"the-solution",children:"The Solution"}),"\n",(0,i.jsx)(n.p,{children:"OSO Kafka Backup provides true disaster recovery:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Point-in-time recovery"}),": Restore to any moment"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Isolated backups"}),": Corruption doesn't propagate"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cost-effective"}),": Backup storage vs. active replication"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Flexible recovery"}),": Full or partial restore"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"dr-architecture",children:"DR Architecture"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Production Region                    DR Region\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                 \u2502                 \u2502                 \u2502\n\u2502  Kafka Cluster  \u2502\u2500\u2500\u2500Backup\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502   S3 Bucket     \u2502\n\u2502                 \u2502                 \u2502                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502                 \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 Topic A   \u2502  \u2502                 \u2502  \u2502  Backups  \u2502  \u2502\n\u2502  \u2502 Topic B   \u2502  \u2502                 \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502  \u2502 Topic C   \u2502  \u2502                 \u2502                 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502                 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502                 \u2502                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                          \u2502\n                                             \u2502 Restore\n                                             \u25bc\n                                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                   \u2502  DR Kafka       \u2502\n                                   \u2502  Cluster        \u2502\n                                   \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n                                   \u2502  \u2502 Topic A   \u2502  \u2502\n                                   \u2502  \u2502 Topic B   \u2502  \u2502\n                                   \u2502  \u2502 Topic C   \u2502  \u2502\n                                   \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n                                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h2,{id:"dr-scenarios",children:"DR Scenarios"}),"\n",(0,i.jsx)(n.h3,{id:"scenario-1-regional-failure",children:"Scenario 1: Regional Failure"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Situation"}),": Entire production region becomes unavailable."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recovery"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Activate DR Kafka cluster"}),"\n",(0,i.jsx)(n.li,{children:"Restore from latest backup"}),"\n",(0,i.jsx)(n.li,{children:"Reset consumer offsets"}),"\n",(0,i.jsx)(n.li,{children:"Redirect applications to DR cluster"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"RTO"}),": 30 minutes - 2 hours (depending on data volume)\n",(0,i.jsx)(n.strong,{children:"RPO"}),": Last backup (typically 15 minutes - 1 hour)"]}),"\n",(0,i.jsx)(n.h3,{id:"scenario-2-data-corruption",children:"Scenario 2: Data Corruption"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Situation"}),": Bad data published to topics, affecting consumers."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recovery"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Identify corruption timestamp"}),"\n",(0,i.jsx)(n.li,{children:"PITR restore to just before corruption"}),"\n",(0,i.jsx)(n.li,{children:"Continue from clean state"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"restore:\n  time_window_end: 1701234500000  # Just before corruption\n"})}),"\n",(0,i.jsx)(n.h3,{id:"scenario-3-accidental-topic-deletion",children:"Scenario 3: Accidental Topic Deletion"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Situation"}),": Critical topic accidentally deleted."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recovery"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Identify which backup contains the topic"}),"\n",(0,i.jsx)(n.li,{children:"Restore specific topic"}),"\n",(0,i.jsx)(n.li,{children:"Resume operations"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"restore:\n  topics:\n    - accidentally-deleted-topic\n"})}),"\n",(0,i.jsx)(n.h3,{id:"scenario-4-ransomware-attack",children:"Scenario 4: Ransomware Attack"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Situation"}),": Kafka cluster compromised, data encrypted."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recovery"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Provision new cluster (isolated)"}),"\n",(0,i.jsx)(n.li,{children:"Restore from clean backup"}),"\n",(0,i.jsx)(n.li,{children:"Validate data integrity"}),"\n",(0,i.jsx)(n.li,{children:"Cut over to new cluster"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"implementation",children:"Implementation"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-configure-automated-backups",children:"Step 1: Configure Automated Backups"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="dr-backup.yaml"',children:'mode: backup\nbackup_id: "production-${TIMESTAMP}"\n\nsource:\n  bootstrap_servers:\n    - kafka-prod-1:9092\n    - kafka-prod-2:9092\n    - kafka-prod-3:9092\n  security:\n    security_protocol: SASL_SSL\n    sasl_mechanism: SCRAM-SHA-256\n    sasl_username: backup-service\n    sasl_password: ${KAFKA_PASSWORD}\n  topics:\n    include:\n      - "*"\n    exclude:\n      - "__consumer_offsets"\n      - "_schemas"\n\nstorage:\n  backend: s3\n  bucket: kafka-dr-backups\n  region: us-east-1  # DR region\n  prefix: production/hourly\n\nbackup:\n  compression: zstd\n  compression_level: 3\n  checkpoint_interval_secs: 30\n  include_offset_headers: true\n  source_cluster_id: "prod-us-west-2"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"step-2-schedule-backups",children:"Step 2: Schedule Backups"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Kubernetes Operator"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'apiVersion: kafka.oso.sh/v1alpha1\nkind: KafkaBackup\nmetadata:\n  name: dr-backup\nspec:\n  schedule: "0 * * * *"  # Hourly\n  kafkaCluster:\n    bootstrapServers:\n      - kafka-prod-1:9092\n  topics:\n    - "*"\n  storage:\n    storageType: s3\n    s3:\n      bucket: kafka-dr-backups\n      region: us-east-1\n'})}),"\n",(0,i.jsx)(n.h3,{id:"step-3-create-dr-runbook",children:"Step 3: Create DR Runbook"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# dr-restore.sh - Disaster Recovery Runbook\n\nBACKUP_ID="${1:-latest}"\nDR_CLUSTER="kafka-dr-1:9092,kafka-dr-2:9092,kafka-dr-3:9092"\n\necho "=== Kafka Disaster Recovery ==="\necho "Backup ID: $BACKUP_ID"\necho "Target: $DR_CLUSTER"\n\n# 1. Validate backup\necho "Step 1: Validating backup..."\nkafka-backup validate \\\n  --path s3://kafka-dr-backups/production/hourly \\\n  --backup-id "$BACKUP_ID" \\\n  --deep\n\n# 2. Validate restore configuration\necho "Step 2: Validating restore config..."\nkafka-backup validate-restore --config dr-restore.yaml\n\n# 3. Execute restore\necho "Step 3: Executing restore..."\nkafka-backup three-phase-restore --config dr-restore.yaml\n\n# 4. Verify\necho "Step 4: Verifying restore..."\nkafka-topics --bootstrap-server "$DR_CLUSTER" --list\n\necho "=== DR Complete ==="\n'})}),"\n",(0,i.jsx)(n.h3,{id:"step-4-test-dr-regularly",children:"Step 4: Test DR Regularly"}),"\n",(0,i.jsx)(n.p,{children:"Create a DR test schedule:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Test Type"}),(0,i.jsx)(n.th,{children:"Frequency"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Backup validation"}),(0,i.jsx)(n.td,{children:"Daily"}),(0,i.jsx)(n.td,{children:"Verify backup integrity"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Restore test"}),(0,i.jsx)(n.td,{children:"Weekly"}),(0,i.jsx)(n.td,{children:"Restore to test cluster"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Full DR drill"}),(0,i.jsx)(n.td,{children:"Quarterly"}),(0,i.jsx)(n.td,{children:"Complete failover simulation"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"rtorpo-planning",children:"RTO/RPO Planning"}),"\n",(0,i.jsx)(n.h3,{id:"recovery-time-objective-rto",children:"Recovery Time Objective (RTO)"}),"\n",(0,i.jsx)(n.p,{children:"Time to restore service:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Data Volume"}),(0,i.jsx)(n.th,{children:"RTO Estimate"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"< 10 GB"}),(0,i.jsx)(n.td,{children:"15-30 minutes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"10-100 GB"}),(0,i.jsx)(n.td,{children:"30-60 minutes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"100 GB - 1 TB"}),(0,i.jsx)(n.td,{children:"1-2 hours"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"> 1 TB"}),(0,i.jsx)(n.td,{children:"2-4 hours"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Factors affecting RTO"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Network bandwidth to DR region"}),"\n",(0,i.jsx)(n.li,{children:"Target cluster capacity"}),"\n",(0,i.jsx)(n.li,{children:"Number of topics/partitions"}),"\n",(0,i.jsx)(n.li,{children:"Consumer offset reset time"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"recovery-point-objective-rpo",children:"Recovery Point Objective (RPO)"}),"\n",(0,i.jsx)(n.p,{children:"Maximum acceptable data loss:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Backup Frequency"}),(0,i.jsx)(n.th,{children:"RPO"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Continuous"}),(0,i.jsx)(n.td,{children:"~1 minute"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Every 15 minutes"}),(0,i.jsx)(n.td,{children:"15 minutes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Hourly"}),(0,i.jsx)(n.td,{children:"1 hour"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Daily"}),(0,i.jsx)(n.td,{children:"24 hours"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Choose based on"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Data criticality"}),"\n",(0,i.jsx)(n.li,{children:"Backup costs"}),"\n",(0,i.jsx)(n.li,{children:"Compliance requirements"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"cost-analysis",children:"Cost Analysis"}),"\n",(0,i.jsx)(n.h3,{id:"replication-vs-backup",children:"Replication vs. Backup"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Approach"}),(0,i.jsx)(n.th,{children:"Monthly Cost (100 GB/day)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Active-Active (MirrorMaker)"}),(0,i.jsx)(n.td,{children:"$$$$ (2x infrastructure + transfer)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Cross-region replication"}),(0,i.jsx)(n.td,{children:"$$$ (transfer costs)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Hourly backup to S3"}),(0,i.jsx)(n.td,{children:"$ (storage + occasional transfer)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Daily backup to S3"}),(0,i.jsx)(n.td,{children:"$ (storage + rare transfer)"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"backup-storage-costs",children:"Backup Storage Costs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Monthly storage = daily_backup_size \xd7 retention_days \xd7 storage_cost\n\nExample:\n  10 GB/day \xd7 30 days \xd7 $0.023/GB = $6.90/month (S3 Standard)\n  With 4x compression: $1.73/month\n  With Glacier after 30 days: Even less\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"backup-strategy",children:"Backup Strategy"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Multiple backup frequencies"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Hourly for critical data"}),"\n",(0,i.jsx)(n.li,{children:"Daily for full backups"}),"\n",(0,i.jsx)(n.li,{children:"Weekly for long-term retention"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Cross-region storage"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Store backups in DR region"}),"\n",(0,i.jsx)(n.li,{children:"Consider multi-region buckets"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Encryption"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Enable storage encryption"}),"\n",(0,i.jsx)(n.li,{children:"Use customer-managed keys"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"dr-readiness",children:"DR Readiness"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Pre-provision DR cluster"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Keep cluster running (minimal)"}),"\n",(0,i.jsx)(n.li,{children:"Or use auto-scaling on demand"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Automate everything"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Scripted restore process"}),"\n",(0,i.jsx)(n.li,{children:"Infrastructure as code"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Regular testing"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Monthly restore tests"}),"\n",(0,i.jsx)(n.li,{children:"Quarterly full DR drills"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"consumer-recovery",children:"Consumer Recovery"}),"\n",(0,i.jsx)(n.p,{children:"After restore, consumers need attention:"}),"\n",(0,i.jsx)(n.h3,{id:"option-1-reprocess-all",children:"Option 1: Reprocess All"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kafka-consumer-groups \\\n  --bootstrap-server kafka-dr:9092 \\\n  --group my-consumer \\\n  --reset-offsets \\\n  --to-earliest \\\n  --execute\n"})}),"\n",(0,i.jsx)(n.h3,{id:"option-2-resume-from-position",children:"Option 2: Resume from Position"}),"\n",(0,i.jsx)(n.p,{children:"Use three-phase restore with offset reset:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"restore:\n  consumer_group_strategy: header-based\n  reset_consumer_offsets: true\n  consumer_groups:\n    - order-processor\n    - payment-service\n"})}),"\n",(0,i.jsx)(n.h3,{id:"option-3-timestamp-based-resume",children:"Option 3: Timestamp-Based Resume"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kafka-consumer-groups \\\n  --bootstrap-server kafka-dr:9092 \\\n  --group my-consumer \\\n  --reset-offsets \\\n  --to-datetime 2024-12-01T10:00:00.000 \\\n  --execute\n"})}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../guides/restore-pitr",children:"Point-in-Time Recovery"})," - PITR implementation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../guides/offset-management",children:"Offset Management"})," - Consumer recovery"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../operator",children:"Kubernetes Operator"})," - Automated DR backups"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>l});var s=r(6540);const i={},t=s.createContext(i);function c(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);