"use strict";(globalThis.webpackChunkkafka_backup_docs=globalThis.webpackChunkkafka_backup_docs||[]).push([[306],{8282:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"guides/security-setup","title":"Security Setup","description":"Configure TLS, SASL, and encryption for OSO Kafka Backup","source":"@site/docs/guides/security-setup.md","sourceDirName":"guides","slug":"/guides/security-setup","permalink":"/guides/security-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/osodevops/kafka-backup-docs/tree/main/docs/docs/guides/security-setup.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Security Setup","description":"Configure TLS, SASL, and encryption for OSO Kafka Backup","sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Performance Tuning","permalink":"/guides/performance-tuning"},"next":{"title":"CLI Reference","permalink":"/reference/cli-reference"}}');var a=s(4848),i=s(8453);const t={title:"Security Setup",description:"Configure TLS, SASL, and encryption for OSO Kafka Backup",sidebar_position:5},c="Security Setup",l={},o=[{value:"Security Overview",id:"security-overview",level:2},{value:"TLS Configuration",id:"tls-configuration",level:2},{value:"TLS Only (Encryption)",id:"tls-only-encryption",level:3},{value:"TLS with Client Certificate (mTLS)",id:"tls-with-client-certificate-mtls",level:3},{value:"Certificate Requirements",id:"certificate-requirements",level:3},{value:"Creating Certificates",id:"creating-certificates",level:3},{value:"SASL Configuration",id:"sasl-configuration",level:2},{value:"SASL/PLAIN",id:"saslplain",level:3},{value:"SASL/SCRAM-SHA-256",id:"saslscram-sha-256",level:3},{value:"SASL/SCRAM-SHA-512",id:"saslscram-sha-512",level:3},{value:"Security Protocol Matrix",id:"security-protocol-matrix",level:2},{value:"Kubernetes Secret Management",id:"kubernetes-secret-management",level:2},{value:"Create Secrets",id:"create-secrets",level:3},{value:"Use in Deployment",id:"use-in-deployment",level:3},{value:"Kubernetes Operator Configuration",id:"kubernetes-operator-configuration",level:3},{value:"Storage Encryption",id:"storage-encryption",level:2},{value:"S3 Server-Side Encryption",id:"s3-server-side-encryption",level:3},{value:"Azure Encryption",id:"azure-encryption",level:3},{value:"GCS Encryption",id:"gcs-encryption",level:3},{value:"ACL Requirements",id:"acl-requirements",level:2},{value:"Minimum Kafka ACLs for Backup",id:"minimum-kafka-acls-for-backup",level:3},{value:"Minimum Kafka ACLs for Restore",id:"minimum-kafka-acls-for-restore",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Credential Management",id:"credential-management",level:3},{value:"Certificate Management",id:"certificate-management",level:3},{value:"Network Security",id:"network-security",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"SSL Handshake Failed",id:"ssl-handshake-failed",level:3},{value:"SASL Authentication Failed",id:"sasl-authentication-failed",level:3},{value:"Permission Denied",id:"permission-denied",level:3},{value:"Complete Secure Configuration Example",id:"complete-secure-configuration-example",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"security-setup",children:"Security Setup"})}),"\n",(0,a.jsx)(n.p,{children:"Secure your Kafka backup operations with TLS encryption and SASL authentication."}),"\n",(0,a.jsx)(n.h2,{id:"security-overview",children:"Security Overview"}),"\n",(0,a.jsx)(n.p,{children:"OSO Kafka Backup supports multiple security configurations:"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Feature"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"TLS/SSL"})}),(0,a.jsx)(n.td,{children:"Encrypt data in transit"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"SASL"})}),(0,a.jsx)(n.td,{children:"Authenticate to Kafka"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"mTLS"})}),(0,a.jsx)(n.td,{children:"Mutual TLS authentication"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Storage Encryption"})}),(0,a.jsx)(n.td,{children:"Encrypt data at rest"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"tls-configuration",children:"TLS Configuration"}),"\n",(0,a.jsx)(n.h3,{id:"tls-only-encryption",children:"TLS Only (Encryption)"}),"\n",(0,a.jsx)(n.p,{children:"Encrypt communication without authentication:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"source:\n  bootstrap_servers:\n    - kafka:9093\n  security:\n    security_protocol: SSL\n    ssl_ca_location: /certs/ca.crt\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tls-with-client-certificate-mtls",children:"TLS with Client Certificate (mTLS)"}),"\n",(0,a.jsx)(n.p,{children:"Mutual TLS for encryption and authentication:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"source:\n  bootstrap_servers:\n    - kafka:9093\n  security:\n    security_protocol: SSL\n    ssl_ca_location: /certs/ca.crt\n    ssl_certificate_location: /certs/client.crt\n    ssl_key_location: /certs/client.key\n    ssl_key_password: ${SSL_KEY_PASSWORD}  # If key is encrypted\n"})}),"\n",(0,a.jsx)(n.h3,{id:"certificate-requirements",children:"Certificate Requirements"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"File"}),(0,a.jsx)(n.th,{children:"Purpose"}),(0,a.jsx)(n.th,{children:"Format"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"ca.crt"})}),(0,a.jsx)(n.td,{children:"CA certificate to verify broker"}),(0,a.jsx)(n.td,{children:"PEM"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"client.crt"})}),(0,a.jsx)(n.td,{children:"Client certificate"}),(0,a.jsx)(n.td,{children:"PEM"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"client.key"})}),(0,a.jsx)(n.td,{children:"Client private key"}),(0,a.jsx)(n.td,{children:"PEM (PKCS#8)"})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"creating-certificates",children:"Creating Certificates"}),"\n",(0,a.jsx)(n.p,{children:"Using OpenSSL:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Generate CA\nopenssl genrsa -out ca.key 4096\nopenssl req -new -x509 -days 365 -key ca.key -out ca.crt \\\n  -subj "/CN=Kafka-CA"\n\n# Generate client key and CSR\nopenssl genrsa -out client.key 4096\nopenssl req -new -key client.key -out client.csr \\\n  -subj "/CN=kafka-backup"\n\n# Sign client certificate\nopenssl x509 -req -days 365 -in client.csr -CA ca.crt -CAkey ca.key \\\n  -CAcreateserial -out client.crt\n'})}),"\n",(0,a.jsx)(n.h2,{id:"sasl-configuration",children:"SASL Configuration"}),"\n",(0,a.jsx)(n.h3,{id:"saslplain",children:"SASL/PLAIN"}),"\n",(0,a.jsx)(n.p,{children:"Simple username/password authentication:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"source:\n  bootstrap_servers:\n    - kafka:9092\n  security:\n    security_protocol: SASL_PLAINTEXT  # Or SASL_SSL\n    sasl_mechanism: PLAIN\n    sasl_username: backup-user\n    sasl_password: ${KAFKA_PASSWORD}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"saslscram-sha-256",children:"SASL/SCRAM-SHA-256"}),"\n",(0,a.jsx)(n.p,{children:"More secure password authentication:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"source:\n  bootstrap_servers:\n    - kafka:9092\n  security:\n    security_protocol: SASL_SSL\n    sasl_mechanism: SCRAM-SHA-256\n    sasl_username: backup-user\n    sasl_password: ${KAFKA_PASSWORD}\n    ssl_ca_location: /certs/ca.crt\n"})}),"\n",(0,a.jsx)(n.h3,{id:"saslscram-sha-512",children:"SASL/SCRAM-SHA-512"}),"\n",(0,a.jsx)(n.p,{children:"Strongest SCRAM variant:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"source:\n  bootstrap_servers:\n    - kafka:9092\n  security:\n    security_protocol: SASL_SSL\n    sasl_mechanism: SCRAM-SHA-512\n    sasl_username: backup-user\n    sasl_password: ${KAFKA_PASSWORD}\n    ssl_ca_location: /certs/ca.crt\n"})}),"\n",(0,a.jsx)(n.h2,{id:"security-protocol-matrix",children:"Security Protocol Matrix"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Protocol"}),(0,a.jsx)(n.th,{children:"Encryption"}),(0,a.jsx)(n.th,{children:"Authentication"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"PLAINTEXT"})}),(0,a.jsx)(n.td,{children:"No"}),(0,a.jsx)(n.td,{children:"No"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"SSL"})}),(0,a.jsx)(n.td,{children:"Yes (TLS)"}),(0,a.jsx)(n.td,{children:"Optional (mTLS)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"SASL_PLAINTEXT"})}),(0,a.jsx)(n.td,{children:"No"}),(0,a.jsx)(n.td,{children:"Yes (SASL)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"SASL_SSL"})}),(0,a.jsx)(n.td,{children:"Yes (TLS)"}),(0,a.jsx)(n.td,{children:"Yes (SASL)"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"kubernetes-secret-management",children:"Kubernetes Secret Management"}),"\n",(0,a.jsx)(n.h3,{id:"create-secrets",children:"Create Secrets"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="kafka-credentials.yaml"',children:"apiVersion: v1\nkind: Secret\nmetadata:\n  name: kafka-credentials\n  namespace: kafka-backup\ntype: Opaque\nstringData:\n  username: backup-user\n  password: your-secure-password\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="kafka-tls.yaml"',children:"apiVersion: v1\nkind: Secret\nmetadata:\n  name: kafka-tls\n  namespace: kafka-backup\ntype: Opaque\ndata:\n  ca.crt: <base64-encoded-ca>\n  client.crt: <base64-encoded-cert>\n  client.key: <base64-encoded-key>\n"})}),"\n",(0,a.jsx)(n.h3,{id:"use-in-deployment",children:"Use in Deployment"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"spec:\n  containers:\n    - name: kafka-backup\n      env:\n        - name: KAFKA_USERNAME\n          valueFrom:\n            secretKeyRef:\n              name: kafka-credentials\n              key: username\n        - name: KAFKA_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: kafka-credentials\n              key: password\n      volumeMounts:\n        - name: tls\n          mountPath: /certs\n          readOnly: true\n  volumes:\n    - name: tls\n      secret:\n        secretName: kafka-tls\n"})}),"\n",(0,a.jsx)(n.h3,{id:"kubernetes-operator-configuration",children:"Kubernetes Operator Configuration"}),"\n",(0,a.jsx)(n.p,{children:"The operator handles secrets automatically:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: kafka.oso.sh/v1alpha1\nkind: KafkaBackup\nmetadata:\n  name: secure-backup\nspec:\n  kafkaCluster:\n    bootstrapServers:\n      - kafka:9093\n    securityProtocol: SASL_SSL\n    tlsSecret:\n      name: kafka-tls\n      caKey: ca.crt\n    saslSecret:\n      name: kafka-credentials\n      mechanism: SCRAM-SHA-256\n      usernameKey: username\n      passwordKey: password\n"})}),"\n",(0,a.jsx)(n.h2,{id:"storage-encryption",children:"Storage Encryption"}),"\n",(0,a.jsx)(n.h3,{id:"s3-server-side-encryption",children:"S3 Server-Side Encryption"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"storage:\n  backend: s3\n  bucket: my-kafka-backups\n  region: us-west-2\n  # S3 encrypts at rest automatically with SSE-S3\n  # Or configure SSE-KMS in bucket settings\n"})}),"\n",(0,a.jsx)(n.p,{children:"Enable in bucket:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'aws s3api put-bucket-encryption \\\n  --bucket my-kafka-backups \\\n  --server-side-encryption-configuration \'{\n    "Rules": [{\n      "ApplyServerSideEncryptionByDefault": {\n        "SSEAlgorithm": "aws:kms",\n        "KMSMasterKeyID": "arn:aws:kms:us-west-2:123456789:key/12345"\n      }\n    }]\n  }\'\n'})}),"\n",(0,a.jsx)(n.h3,{id:"azure-encryption",children:"Azure Encryption"}),"\n",(0,a.jsx)(n.p,{children:"Azure encrypts all data at rest by default. For customer-managed keys:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"az storage account update \\\n  --name mystorageaccount \\\n  --resource-group mygroup \\\n  --encryption-key-source Microsoft.Keyvault \\\n  --encryption-key-vault https://myvault.vault.azure.net \\\n  --encryption-key-name mykey\n"})}),"\n",(0,a.jsx)(n.h3,{id:"gcs-encryption",children:"GCS Encryption"}),"\n",(0,a.jsx)(n.p,{children:"GCS encrypts all data at rest by default. For customer-managed keys:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"gcloud storage buckets update gs://my-bucket \\\n  --default-encryption-key=projects/PROJECT_ID/locations/LOCATION/keyRings/KEY_RING/cryptoKeys/KEY\n"})}),"\n",(0,a.jsx)(n.h2,{id:"acl-requirements",children:"ACL Requirements"}),"\n",(0,a.jsx)(n.h3,{id:"minimum-kafka-acls-for-backup",children:"Minimum Kafka ACLs for Backup"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Allow reading from all topics\nkafka-acls --bootstrap-server kafka:9092 \\\n  --add --allow-principal User:backup-user \\\n  --operation Read --operation Describe \\\n  --topic '*'\n\n# Allow reading consumer group offsets\nkafka-acls --bootstrap-server kafka:9092 \\\n  --add --allow-principal User:backup-user \\\n  --operation Read --operation Describe \\\n  --group '*'\n\n# Optional: Cluster describe for metadata\nkafka-acls --bootstrap-server kafka:9092 \\\n  --add --allow-principal User:backup-user \\\n  --operation Describe \\\n  --cluster\n"})}),"\n",(0,a.jsx)(n.h3,{id:"minimum-kafka-acls-for-restore",children:"Minimum Kafka ACLs for Restore"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Allow writing to topics\nkafka-acls --bootstrap-server kafka:9092 \\\n  --add --allow-principal User:restore-user \\\n  --operation Write --operation Create --operation Describe \\\n  --topic '*'\n\n# For offset reset\nkafka-acls --bootstrap-server kafka:9092 \\\n  --add --allow-principal User:restore-user \\\n  --operation Read --operation Write \\\n  --group '*'\n"})}),"\n",(0,a.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,a.jsx)(n.p,{children:"Secure credentials using environment variables:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export KAFKA_PASSWORD="your-password"\nexport SSL_KEY_PASSWORD="key-password"\nexport AWS_ACCESS_KEY_ID="AKIA..."\nexport AWS_SECRET_ACCESS_KEY="..."\n'})}),"\n",(0,a.jsx)(n.p,{children:"Reference in config:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"source:\n  security:\n    sasl_password: ${KAFKA_PASSWORD}\n    ssl_key_password: ${SSL_KEY_PASSWORD}\n\nstorage:\n  backend: s3\n  access_key: ${AWS_ACCESS_KEY_ID}\n  secret_key: ${AWS_SECRET_ACCESS_KEY}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsx)(n.h3,{id:"credential-management",children:"Credential Management"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Never commit credentials"})," - Use secrets management"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Rotate credentials"})," - Regular rotation policy"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Least privilege"})," - Minimal required permissions"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Audit access"})," - Log and monitor credential usage"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"certificate-management",children:"Certificate Management"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Automate renewal"})," - Use cert-manager or similar"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Monitor expiry"})," - Alert before certificates expire"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Secure storage"})," - Protect private keys"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Use short-lived certs"})," - 90 days or less"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"network-security",children:"Network Security"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Use TLS"})," - Always encrypt in transit"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Private networks"})," - Keep Kafka on private subnets"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Firewall rules"})," - Restrict access to backup service"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"VPC endpoints"})," - Use private connectivity to cloud storage"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(n.h3,{id:"ssl-handshake-failed",children:"SSL Handshake Failed"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"Error: SSL handshake failed\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Causes:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Certificate mismatch"}),"\n",(0,a.jsx)(n.li,{children:"Expired certificate"}),"\n",(0,a.jsx)(n.li,{children:"Wrong CA certificate"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Verify certificate\nopenssl s_client -connect kafka:9093 -CAfile ca.crt\n\n# Check expiry\nopenssl x509 -in client.crt -noout -dates\n"})}),"\n",(0,a.jsx)(n.h3,{id:"sasl-authentication-failed",children:"SASL Authentication Failed"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"Error: SASL authentication failed\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Causes:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Wrong username/password"}),"\n",(0,a.jsx)(n.li,{children:"User not created in Kafka"}),"\n",(0,a.jsx)(n.li,{children:"Wrong SASL mechanism"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Test with kafka-console-consumer\nkafka-console-consumer \\\n  --bootstrap-server kafka:9092 \\\n  --consumer.config client.properties \\\n  --topic test\n"})}),"\n",(0,a.jsx)(n.h3,{id:"permission-denied",children:"Permission Denied"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"Error: Not authorized to access topic\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Solution:"})," Check and update ACLs:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"kafka-acls --bootstrap-server kafka:9092 \\\n  --list --principal User:backup-user\n"})}),"\n",(0,a.jsx)(n.h2,{id:"complete-secure-configuration-example",children:"Complete Secure Configuration Example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="secure-backup.yaml"',children:'mode: backup\nbackup_id: "secure-production-backup"\n\nsource:\n  bootstrap_servers:\n    - kafka-0.kafka.svc:9093\n    - kafka-1.kafka.svc:9093\n    - kafka-2.kafka.svc:9093\n  security:\n    security_protocol: SASL_SSL\n    sasl_mechanism: SCRAM-SHA-512\n    sasl_username: backup-service\n    sasl_password: ${KAFKA_PASSWORD}\n    ssl_ca_location: /certs/ca.crt\n    ssl_certificate_location: /certs/client.crt\n    ssl_key_location: /certs/client.key\n  topics:\n    include:\n      - "*"\n    exclude:\n      - "__consumer_offsets"\n\nstorage:\n  backend: s3\n  bucket: secure-kafka-backups\n  region: us-west-2\n  # Uses IAM role - no static credentials\n\nbackup:\n  compression: zstd\n  compression_level: 3\n  include_offset_headers: true\n'})}),"\n",(0,a.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"../deployment",children:"Deployment Guide"})," - Production deployment"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"../operator",children:"Kubernetes Operator"})," - Secure K8s setup"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"../enterprise",children:"Enterprise Features"})," - Field-level encryption"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var r=s(6540);const a={},i=r.createContext(a);function t(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);