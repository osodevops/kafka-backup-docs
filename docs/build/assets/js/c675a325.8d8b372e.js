"use strict";(globalThis.webpackChunkkafka_backup_docs=globalThis.webpackChunkkafka_backup_docs||[]).push([[2183],{6380:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"reference/config-yaml","title":"Configuration Reference","description":"Complete reference for OSO Kafka Backup YAML configuration files","source":"@site/docs/reference/config-yaml.md","sourceDirName":"reference","slug":"/reference/config-yaml","permalink":"/reference/config-yaml","draft":false,"unlisted":false,"editUrl":"https://github.com/osodevops/kafka-backup-docs/tree/main/docs/docs/reference/config-yaml.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Configuration Reference","description":"Complete reference for OSO Kafka Backup YAML configuration files","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"CLI Reference","permalink":"/reference/cli-reference"},"next":{"title":"Storage Format","permalink":"/reference/storage-format"}}');var i=r(4848),t=r(8453);const c={title:"Configuration Reference",description:"Complete reference for OSO Kafka Backup YAML configuration files",sidebar_position:2},o="Configuration Reference",d={},a=[{value:"Configuration Structure",id:"configuration-structure",level:2},{value:"Common Configuration",id:"common-configuration",level:2},{value:"mode",id:"mode",level:3},{value:"backup_id",id:"backup_id",level:3},{value:"Kafka Cluster Configuration",id:"kafka-cluster-configuration",level:2},{value:"bootstrap_servers",id:"bootstrap_servers",level:3},{value:"security",id:"security",level:3},{value:"Security Protocol Options",id:"security-protocol-options",level:4},{value:"SASL Mechanism Options",id:"sasl-mechanism-options",level:4},{value:"topics",id:"topics",level:3},{value:"Storage Configuration",id:"storage-configuration",level:2},{value:"backend",id:"backend",level:3},{value:"Filesystem Storage",id:"filesystem-storage",level:3},{value:"S3 Storage",id:"s3-storage",level:3},{value:"Azure Blob Storage",id:"azure-blob-storage",level:3},{value:"Google Cloud Storage",id:"google-cloud-storage",level:3},{value:"Backup Configuration",id:"backup-configuration",level:2},{value:"Backup Options Reference",id:"backup-options-reference",level:3},{value:"Restore Configuration",id:"restore-configuration",level:2},{value:"Restore Options Reference",id:"restore-options-reference",level:3},{value:"Consumer Group Strategies",id:"consumer-group-strategies",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Basic Backup",id:"basic-backup",level:3},{value:"Production S3 Backup",id:"production-s3-backup",level:3},{value:"Point-in-Time Restore",id:"point-in-time-restore",level:3},{value:"Disaster Recovery Restore",id:"disaster-recovery-restore",level:3},{value:"Environment Variable Substitution",id:"environment-variable-substitution",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"configuration-reference",children:"Configuration Reference"})}),"\n",(0,i.jsx)(n.p,{children:"OSO Kafka Backup uses YAML configuration files for backup and restore operations. This reference documents all available options."}),"\n",(0,i.jsx)(n.h2,{id:"configuration-structure",children:"Configuration Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# Required: Operation mode\nmode: backup  # or "restore"\n\n# Required: Unique backup identifier\nbackup_id: "my-backup-001"\n\n# Source/Target Kafka cluster configuration\nsource:  # For backup mode\ntarget:  # For restore mode\n  bootstrap_servers: []\n  security: {}\n  topics: {}\n\n# Storage backend configuration\nstorage:\n  backend: filesystem  # or s3, azure, gcs\n  # Backend-specific options...\n\n# Mode-specific options\nbackup: {}   # Backup options\nrestore: {}  # Restore options\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"common-configuration",children:"Common Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"mode",children:"mode"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Required."})," Operation mode."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"mode: backup   # Run a backup operation\nmode: restore  # Run a restore operation\n"})}),"\n",(0,i.jsx)(n.h3,{id:"backup_id",children:"backup_id"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Required."})," Unique identifier for the backup."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'backup_id: "production-daily-001"\nbackup_id: "dr-backup-$(date +%Y%m%d)"\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"kafka-cluster-configuration",children:"Kafka Cluster Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Used as ",(0,i.jsx)(n.code,{children:"source"})," in backup mode and ",(0,i.jsx)(n.code,{children:"target"})," in restore mode."]}),"\n",(0,i.jsx)(n.h3,{id:"bootstrap_servers",children:"bootstrap_servers"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Required."})," List of Kafka broker addresses."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"source:\n  bootstrap_servers:\n    - broker-1.kafka.svc:9092\n    - broker-2.kafka.svc:9092\n    - broker-3.kafka.svc:9092\n"})}),"\n",(0,i.jsx)(n.h3,{id:"security",children:"security"}),"\n",(0,i.jsx)(n.p,{children:"Optional security configuration for Kafka connection."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"source:\n  security:\n    # Security protocol\n    security_protocol: SASL_SSL  # PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL\n\n    # SASL configuration\n    sasl_mechanism: SCRAM-SHA-256  # PLAIN, SCRAM-SHA-256, SCRAM-SHA-512\n    sasl_username: backup-user\n    sasl_password: ${KAFKA_PASSWORD}  # Environment variable substitution\n\n    # SSL/TLS configuration\n    ssl_ca_location: /etc/kafka/ca.crt\n    ssl_certificate_location: /etc/kafka/client.crt\n    ssl_key_location: /etc/kafka/client.key\n    ssl_key_password: ${SSL_KEY_PASSWORD}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"security-protocol-options",children:"Security Protocol Options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Protocol"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PLAINTEXT"})}),(0,i.jsx)(n.td,{children:"No encryption, no authentication"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SSL"})}),(0,i.jsx)(n.td,{children:"TLS encryption, optional mTLS"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SASL_PLAINTEXT"})}),(0,i.jsx)(n.td,{children:"SASL authentication, no encryption"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SASL_SSL"})}),(0,i.jsx)(n.td,{children:"SASL authentication with TLS encryption"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"sasl-mechanism-options",children:"SASL Mechanism Options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Mechanism"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PLAIN"})}),(0,i.jsx)(n.td,{children:"Simple username/password"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SCRAM-SHA-256"})}),(0,i.jsx)(n.td,{children:"Salted Challenge Response (SHA-256)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SCRAM-SHA-512"})}),(0,i.jsx)(n.td,{children:"Salted Challenge Response (SHA-512)"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"topics",children:"topics"}),"\n",(0,i.jsx)(n.p,{children:"Topic selection for backup or restore."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'source:\n  topics:\n    # Include specific topics or patterns\n    include:\n      - orders              # Exact topic name\n      - payments            # Another exact name\n      - "events-*"          # Wildcard pattern\n      - "logs-2024-*"       # Date-based pattern\n\n    # Exclude topics (applied after include)\n    exclude:\n      - "__consumer_offsets"  # Internal Kafka topic\n      - "_schemas"            # Schema Registry topic\n      - "*-internal"          # Pattern exclusion\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"storage-configuration",children:"Storage Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"backend",children:"backend"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Required."})," Storage backend type."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"storage:\n  backend: filesystem  # Local filesystem or mounted volume\n  backend: s3          # Amazon S3 or S3-compatible storage\n  backend: azure       # Azure Blob Storage\n  backend: gcs         # Google Cloud Storage\n"})}),"\n",(0,i.jsx)(n.h3,{id:"filesystem-storage",children:"Filesystem Storage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'storage:\n  backend: filesystem\n  path: "/var/lib/kafka-backup/data"\n  prefix: "cluster-prod"  # Optional subdirectory\n'})}),"\n",(0,i.jsx)(n.h3,{id:"s3-storage",children:"S3 Storage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"storage:\n  backend: s3\n  bucket: my-kafka-backups\n  region: us-west-2\n  prefix: backups/production  # Optional key prefix\n\n  # Optional: Custom endpoint for MinIO, Ceph, etc.\n  endpoint: https://minio.example.com:9000\n\n  # Credentials (optional - uses AWS credential chain if not specified)\n  access_key: ${AWS_ACCESS_KEY_ID}\n  secret_key: ${AWS_SECRET_ACCESS_KEY}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"azure-blob-storage",children:"Azure Blob Storage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"storage:\n  backend: azure\n  container: kafka-backups\n  account_name: mystorageaccount\n  prefix: backups/production\n\n  # Credentials\n  account_key: ${AZURE_STORAGE_KEY}\n  # Or use connection string:\n  # connection_string: ${AZURE_STORAGE_CONNECTION_STRING}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"google-cloud-storage",children:"Google Cloud Storage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"storage:\n  backend: gcs\n  bucket: my-kafka-backups\n  prefix: backups/production\n\n  # Credentials (uses GOOGLE_APPLICATION_CREDENTIALS if not specified)\n  service_account_json: /etc/gcp/service-account.json\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"backup-configuration",children:"Backup Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Options specific to backup mode."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'backup:\n  # Compression settings\n  compression: zstd           # Options: zstd, lz4, none\n  compression_level: 3        # 1-22 for zstd (default: 3)\n\n  # Starting offset\n  start_offset: earliest      # earliest, latest, or specific offset\n\n  # Segment settings\n  segment_max_bytes: 134217728     # 128 MB - roll segment after this size\n  segment_max_interval_ms: 60000   # 60 sec - roll segment after this time\n\n  # Continuous backup mode\n  continuous: false           # true for streaming backup\n\n  # Internal topics\n  include_internal_topics: false  # Include __consumer_offsets, etc.\n\n  # Checkpointing\n  checkpoint_interval_secs: 30    # Save progress every 30 seconds\n  sync_interval_secs: 60          # Sync to storage every 60 seconds\n\n  # Offset headers (required for consumer offset reset)\n  include_offset_headers: true\n\n  # Source cluster identifier\n  source_cluster_id: "prod-cluster-east"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"backup-options-reference",children:"Backup Options Reference"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"compression"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"zstd"})}),(0,i.jsx)(n.td,{children:"Compression algorithm"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"compression_level"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"3"})}),(0,i.jsx)(n.td,{children:"Compression level (1-22 for zstd)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"start_offset"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"earliest"})}),(0,i.jsxs)(n.td,{children:["Starting offset: ",(0,i.jsx)(n.code,{children:"earliest"}),", ",(0,i.jsx)(n.code,{children:"latest"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"segment_max_bytes"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"134217728"})}),(0,i.jsx)(n.td,{children:"Max segment size in bytes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"segment_max_interval_ms"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"60000"})}),(0,i.jsx)(n.td,{children:"Max segment duration in ms"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"continuous"})}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Enable continuous/streaming backup"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"include_internal_topics"})}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Include internal Kafka topics"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"checkpoint_interval_secs"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"30"})}),(0,i.jsx)(n.td,{children:"Checkpoint frequency"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sync_interval_secs"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"60"})}),(0,i.jsx)(n.td,{children:"Storage sync frequency"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"include_offset_headers"})}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"Store original offsets"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"source_cluster_id"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Cluster identifier for tracking"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"restore-configuration",children:"Restore Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Options specific to restore mode."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"restore:\n  # Point-in-Time Recovery (PITR)\n  time_window_start: 1701417600000  # Unix milliseconds (optional)\n  time_window_end: 1701504000000    # Unix milliseconds (optional)\n\n  # Partition filtering\n  source_partitions:              # Only restore specific partitions\n    - 0\n    - 1\n    - 2\n\n  # Partition mapping (remap partitions during restore)\n  partition_mapping:\n    0: 0\n    1: 2    # Source partition 1 -> target partition 2\n\n  # Topic remapping\n  topic_mapping:\n    orders: orders_restored       # orders -> orders_restored\n    payments: payments_dr         # payments -> payments_dr\n\n  # Consumer offset strategy\n  consumer_group_strategy: skip   # skip, header-based, timestamp-based, manual\n\n  # Dry run mode\n  dry_run: false                  # Validate without executing\n\n  # Include original offset in headers\n  include_original_offset_header: true\n\n  # Rate limiting\n  rate_limit_records_per_sec: null  # null for unlimited\n  rate_limit_bytes_per_sec: null    # null for unlimited\n\n  # Performance tuning\n  max_concurrent_partitions: 4      # Parallel partition processing\n  produce_batch_size: 1000          # Records per produce batch\n\n  # Resumable restores\n  checkpoint_state: null            # Path to checkpoint file\n  checkpoint_interval_secs: 60      # Checkpoint frequency\n\n  # Offset mapping report\n  offset_report: /tmp/offset-mapping.json  # Save offset mapping\n\n  # Consumer group offset reset\n  reset_consumer_offsets: false     # Reset offsets after restore\n  consumer_groups:                  # Groups to reset\n    - my-consumer-group\n    - analytics-consumer\n"})}),"\n",(0,i.jsx)(n.h3,{id:"restore-options-reference",children:"Restore Options Reference"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"time_window_start"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"PITR start timestamp (Unix ms)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"time_window_end"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"PITR end timestamp (Unix ms)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"source_partitions"})}),(0,i.jsx)(n.td,{children:"list"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Partitions to restore"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"partition_mapping"})}),(0,i.jsx)(n.td,{children:"map"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Partition remapping"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"topic_mapping"})}),(0,i.jsx)(n.td,{children:"map"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Topic remapping"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"consumer_group_strategy"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"skip"})}),(0,i.jsx)(n.td,{children:"Offset handling strategy"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dry_run"})}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Validate without executing"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"include_original_offset_header"})}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"Add original offset header"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rate_limit_records_per_sec"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Rate limit (records/sec)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rate_limit_bytes_per_sec"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Rate limit (bytes/sec)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"max_concurrent_partitions"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"4"})}),(0,i.jsx)(n.td,{children:"Parallel partitions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"produce_batch_size"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"1000"})}),(0,i.jsx)(n.td,{children:"Batch size"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"reset_consumer_offsets"})}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Reset consumer offsets"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"consumer_groups"})}),(0,i.jsx)(n.td,{children:"list"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Consumer groups to reset"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"consumer-group-strategies",children:"Consumer Group Strategies"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Strategy"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"skip"})}),(0,i.jsx)(n.td,{children:"Don't modify consumer offsets"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"header-based"})}),(0,i.jsx)(n.td,{children:"Use offset mapping from backup headers"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"timestamp-based"})}),(0,i.jsx)(n.td,{children:"Reset to timestamp-based offsets"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cluster-scan"})}),(0,i.jsx)(n.td,{children:"Scan target cluster for offset mapping"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"manual"})}),(0,i.jsx)(n.td,{children:"Generate script for manual reset"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,i.jsx)(n.h3,{id:"basic-backup",children:"Basic Backup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'mode: backup\nbackup_id: "daily-backup"\n\nsource:\n  bootstrap_servers:\n    - kafka:9092\n  topics:\n    include:\n      - orders\n      - payments\n\nstorage:\n  backend: filesystem\n  path: "/data/backups"\n\nbackup:\n  compression: zstd\n'})}),"\n",(0,i.jsx)(n.h3,{id:"production-s3-backup",children:"Production S3 Backup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'mode: backup\nbackup_id: "prod-backup-${BACKUP_DATE}"\n\nsource:\n  bootstrap_servers:\n    - broker-1.prod.kafka:9092\n    - broker-2.prod.kafka:9092\n    - broker-3.prod.kafka:9092\n  security:\n    security_protocol: SASL_SSL\n    sasl_mechanism: SCRAM-SHA-256\n    sasl_username: backup-service\n    sasl_password: ${KAFKA_PASSWORD}\n    ssl_ca_location: /etc/kafka/ca.crt\n  topics:\n    include:\n      - "*"\n    exclude:\n      - "__consumer_offsets"\n      - "_schemas"\n      - "*-internal"\n\nstorage:\n  backend: s3\n  bucket: company-kafka-backups\n  region: us-west-2\n  prefix: production/${CLUSTER_NAME}\n\nbackup:\n  compression: zstd\n  compression_level: 5\n  checkpoint_interval_secs: 60\n  include_offset_headers: true\n  source_cluster_id: "prod-us-west-2"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"point-in-time-restore",children:"Point-in-Time Restore"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'mode: restore\nbackup_id: "prod-backup-20241201"\n\ntarget:\n  bootstrap_servers:\n    - dr-broker-1:9092\n    - dr-broker-2:9092\n\nstorage:\n  backend: s3\n  bucket: company-kafka-backups\n  region: us-west-2\n  prefix: production/prod-cluster\n\nrestore:\n  # Restore only data from Dec 1, 2024 10:00 to 14:00 UTC\n  time_window_start: 1701424800000\n  time_window_end: 1701439200000\n\n  topic_mapping:\n    orders: orders_restored\n\n  consumer_group_strategy: header-based\n  reset_consumer_offsets: true\n  consumer_groups:\n    - order-processor\n    - analytics-service\n'})}),"\n",(0,i.jsx)(n.h3,{id:"disaster-recovery-restore",children:"Disaster Recovery Restore"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'mode: restore\nbackup_id: "prod-backup-latest"\n\ntarget:\n  bootstrap_servers:\n    - dr-broker-1.dr.kafka:9092\n    - dr-broker-2.dr.kafka:9092\n    - dr-broker-3.dr.kafka:9092\n  security:\n    security_protocol: SASL_SSL\n    sasl_mechanism: SCRAM-SHA-256\n    sasl_username: restore-service\n    sasl_password: ${DR_KAFKA_PASSWORD}\n    ssl_ca_location: /etc/kafka/ca.crt\n\nstorage:\n  backend: s3\n  bucket: company-kafka-backups\n  region: us-east-1  # DR region\n  prefix: production/prod-cluster\n\nrestore:\n  dry_run: false\n  max_concurrent_partitions: 8\n  produce_batch_size: 5000\n\n  consumer_group_strategy: header-based\n  reset_consumer_offsets: true\n  consumer_groups:\n    - order-service\n    - payment-service\n    - notification-service\n    - analytics-pipeline\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"environment-variable-substitution",children:"Environment Variable Substitution"}),"\n",(0,i.jsxs)(n.p,{children:["Configuration files support environment variable substitution using ",(0,i.jsx)(n.code,{children:"${VAR_NAME}"})," syntax:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"source:\n  security:\n    sasl_password: ${KAFKA_PASSWORD}\n\nstorage:\n  backend: s3\n  access_key: ${AWS_ACCESS_KEY_ID}\n  secret_key: ${AWS_SECRET_ACCESS_KEY}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Set variables before running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'export KAFKA_PASSWORD="secret123"\nexport AWS_ACCESS_KEY_ID="AKIA..."\nexport AWS_SECRET_ACCESS_KEY="..."\n\nkafka-backup backup --config backup.yaml\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>o});var s=r(6540);const i={},t=s.createContext(i);function c(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);