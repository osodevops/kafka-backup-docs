"use strict";(globalThis.webpackChunkkafka_backup_docs=globalThis.webpackChunkkafka_backup_docs||[]).push([[499],{8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var c=s(6540);const a={},t=c.createContext(a);function i(e){const n=c.useContext(t);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),c.createElement(t.Provider,{value:n},e.children)}},9535:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>o});const c=JSON.parse('{"id":"deployment/cloud-setup/gcs","title":"Google Cloud Storage Setup","description":"Configure Google Cloud Storage as backend for OSO Kafka Backup","source":"@site/docs/deployment/cloud-setup/gcs.md","sourceDirName":"deployment/cloud-setup","slug":"/deployment/cloud-setup/gcs","permalink":"/deployment/cloud-setup/gcs","draft":false,"unlisted":false,"editUrl":"https://github.com/osodevops/kafka-backup-docs/tree/main/docs/docs/deployment/cloud-setup/gcs.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Google Cloud Storage Setup","description":"Configure Google Cloud Storage as backend for OSO Kafka Backup","sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Azure Blob Storage Setup","permalink":"/deployment/cloud-setup/azure-blob"},"next":{"title":"Backup to S3","permalink":"/guides/backup-to-s3"}}');var a=s(4848),t=s(8453);const i={title:"Google Cloud Storage Setup",description:"Configure Google Cloud Storage as backend for OSO Kafka Backup",sidebar_position:3},l="Google Cloud Storage Setup",r={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Create GCS Bucket",id:"create-gcs-bucket",level:2},{value:"Using gcloud CLI",id:"using-gcloud-cli",level:3},{value:"Using Terraform",id:"using-terraform",level:3},{value:"Authentication",id:"authentication",level:2},{value:"Service Account",id:"service-account",level:3},{value:"Workload Identity (GKE)",id:"workload-identity-gke",level:3},{value:"Application Default Credentials",id:"application-default-credentials",level:3},{value:"Configuration",id:"configuration",level:2},{value:"With Service Account Key",id:"with-service-account-key",level:3},{value:"With Environment Variable",id:"with-environment-variable",level:3},{value:"With Workload Identity (GKE)",id:"with-workload-identity-gke",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"IAM Roles",id:"iam-roles",level:2},{value:"Storage Classes",id:"storage-classes",level:2},{value:"Set Default Storage Class",id:"set-default-storage-class",level:3},{value:"Dual-Region / Multi-Region",id:"dual-region--multi-region",level:2},{value:"Object Lifecycle",id:"object-lifecycle",level:2},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Enable Uniform Bucket-Level Access",id:"enable-uniform-bucket-level-access",level:3},{value:"Enable Object Versioning",id:"enable-object-versioning",level:3},{value:"Configure CMEK (Customer-Managed Encryption Keys)",id:"configure-cmek-customer-managed-encryption-keys",level:3},{value:"Enable Access Logging",id:"enable-access-logging",level:3},{value:"Testing",id:"testing",level:2},{value:"Verify Access",id:"verify-access",level:3},{value:"Test Authentication",id:"test-authentication",level:3},{value:"Test from Application",id:"test-from-application",level:3},{value:"Kubernetes Deployment",id:"kubernetes-deployment",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Permission Denied",id:"permission-denied",level:3},{value:"Workload Identity Issues",id:"workload-identity-issues",level:3},{value:"Slow Transfers",id:"slow-transfers",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"google-cloud-storage-setup",children:"Google Cloud Storage Setup"})}),"\n",(0,a.jsx)(n.p,{children:"Configure Google Cloud Storage (GCS) for Kafka backups."}),"\n",(0,a.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Google Cloud project"}),"\n",(0,a.jsx)(n.li,{children:"gcloud CLI installed and configured"}),"\n",(0,a.jsx)(n.li,{children:"Permissions to create buckets and service accounts"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"create-gcs-bucket",children:"Create GCS Bucket"}),"\n",(0,a.jsx)(n.h3,{id:"using-gcloud-cli",children:"Using gcloud CLI"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Set variables\nPROJECT_ID="my-project"\nBUCKET_NAME="my-kafka-backups"\nREGION="us-west1"\n\n# Create bucket\ngcloud storage buckets create gs://$BUCKET_NAME \\\n  --project=$PROJECT_ID \\\n  --location=$REGION \\\n  --uniform-bucket-level-access\n\n# Enable versioning\ngcloud storage buckets update gs://$BUCKET_NAME --versioning\n\n# Set lifecycle policy\ncat > lifecycle.json << \'EOF\'\n{\n  "lifecycle": {\n    "rule": [\n      {\n        "action": {"type": "SetStorageClass", "storageClass": "NEARLINE"},\n        "condition": {"age": 30}\n      },\n      {\n        "action": {"type": "SetStorageClass", "storageClass": "COLDLINE"},\n        "condition": {"age": 90}\n      },\n      {\n        "action": {"type": "Delete"},\n        "condition": {"age": 365}\n      }\n    ]\n  }\n}\nEOF\n\ngcloud storage buckets update gs://$BUCKET_NAME --lifecycle-file=lifecycle.json\n'})}),"\n",(0,a.jsx)(n.h3,{id:"using-terraform",children:"Using Terraform"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-hcl",metastring:'title="gcs.tf"',children:'resource "google_storage_bucket" "kafka_backups" {\n  name          = "my-kafka-backups"\n  location      = "US-WEST1"\n  project       = var.project_id\n\n  uniform_bucket_level_access = true\n\n  versioning {\n    enabled = true\n  }\n\n  lifecycle_rule {\n    condition {\n      age = 30\n    }\n    action {\n      type          = "SetStorageClass"\n      storage_class = "NEARLINE"\n    }\n  }\n\n  lifecycle_rule {\n    condition {\n      age = 90\n    }\n    action {\n      type          = "SetStorageClass"\n      storage_class = "COLDLINE"\n    }\n  }\n\n  lifecycle_rule {\n    condition {\n      age = 365\n    }\n    action {\n      type = "Delete"\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,a.jsx)(n.h3,{id:"service-account",children:"Service Account"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Create service account\ngcloud iam service-accounts create kafka-backup \\\n  --display-name="Kafka Backup Service Account" \\\n  --project=$PROJECT_ID\n\n# Get service account email\nSA_EMAIL="kafka-backup@${PROJECT_ID}.iam.gserviceaccount.com"\n\n# Grant bucket access\ngcloud storage buckets add-iam-policy-binding gs://$BUCKET_NAME \\\n  --member="serviceAccount:$SA_EMAIL" \\\n  --role="roles/storage.objectAdmin"\n\n# Create key file\ngcloud iam service-accounts keys create kafka-backup-key.json \\\n  --iam-account=$SA_EMAIL\n'})}),"\n",(0,a.jsx)(n.h3,{id:"workload-identity-gke",children:"Workload Identity (GKE)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Enable workload identity on cluster\ngcloud container clusters update my-cluster \\\n  --zone=us-west1-a \\\n  --workload-pool=${PROJECT_ID}.svc.id.goog\n\n# Create Kubernetes service account\nkubectl create serviceaccount kafka-backup -n kafka-backup\n\n# Bind Kubernetes SA to Google SA\ngcloud iam service-accounts add-iam-policy-binding $SA_EMAIL \\\n  --role="roles/iam.workloadIdentityUser" \\\n  --member="serviceAccount:${PROJECT_ID}.svc.id.goog[kafka-backup/kafka-backup]"\n\n# Annotate Kubernetes SA\nkubectl annotate serviceaccount kafka-backup \\\n  -n kafka-backup \\\n  iam.gke.io/gcp-service-account=$SA_EMAIL\n'})}),"\n",(0,a.jsx)(n.h3,{id:"application-default-credentials",children:"Application Default Credentials"}),"\n",(0,a.jsx)(n.p,{children:"On GCE VMs or Cloud Run:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# No explicit configuration needed\n# Uses instance metadata service automatically\n"})}),"\n",(0,a.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsx)(n.h3,{id:"with-service-account-key",children:"With Service Account Key"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="backup.yaml"',children:"storage:\n  backend: gcs\n  bucket: my-kafka-backups\n  prefix: production/daily\n  service_account_json: /path/to/kafka-backup-key.json\n"})}),"\n",(0,a.jsx)(n.h3,{id:"with-environment-variable",children:"With Environment Variable"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="backup.yaml"',children:"storage:\n  backend: gcs\n  bucket: my-kafka-backups\n  prefix: production/daily\n  # Uses GOOGLE_APPLICATION_CREDENTIALS environment variable\n"})}),"\n",(0,a.jsx)(n.h3,{id:"with-workload-identity-gke",children:"With Workload Identity (GKE)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="backup.yaml"',children:"storage:\n  backend: gcs\n  bucket: my-kafka-backups\n  prefix: production/daily\n  # No credentials needed - uses workload identity\n"})}),"\n",(0,a.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Variable"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"GOOGLE_APPLICATION_CREDENTIALS"})}),(0,a.jsx)(n.td,{children:"Path to service account JSON key"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"GOOGLE_CLOUD_PROJECT"})}),(0,a.jsx)(n.td,{children:"Default project ID"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"CLOUDSDK_CORE_PROJECT"})}),(0,a.jsx)(n.td,{children:"Alternative project variable"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"iam-roles",children:"IAM Roles"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Role"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"roles/storage.objectViewer"})}),(0,a.jsx)(n.td,{children:"Read backups"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"roles/storage.objectCreator"})}),(0,a.jsx)(n.td,{children:"Create backups"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"roles/storage.objectAdmin"})}),(0,a.jsx)(n.td,{children:"Full access (recommended)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"roles/storage.admin"})}),(0,a.jsx)(n.td,{children:"Bucket management"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:"Minimum required permissions:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"- storage.objects.create\n- storage.objects.delete\n- storage.objects.get\n- storage.objects.list\n"})}),"\n",(0,a.jsx)(n.h2,{id:"storage-classes",children:"Storage Classes"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Class"}),(0,a.jsx)(n.th,{children:"Use Case"}),(0,a.jsx)(n.th,{children:"Minimum Storage"}),(0,a.jsx)(n.th,{children:"Retrieval Cost"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"STANDARD"})}),(0,a.jsx)(n.td,{children:"Frequent access"}),(0,a.jsx)(n.td,{children:"None"}),(0,a.jsx)(n.td,{children:"Free"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"NEARLINE"})}),(0,a.jsx)(n.td,{children:"Monthly access"}),(0,a.jsx)(n.td,{children:"30 days"}),(0,a.jsx)(n.td,{children:"$"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"COLDLINE"})}),(0,a.jsx)(n.td,{children:"Quarterly access"}),(0,a.jsx)(n.td,{children:"90 days"}),(0,a.jsx)(n.td,{children:"$$"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"ARCHIVE"})}),(0,a.jsx)(n.td,{children:"Yearly access"}),(0,a.jsx)(n.td,{children:"365 days"}),(0,a.jsx)(n.td,{children:"$$$"})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"set-default-storage-class",children:"Set Default Storage Class"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"gcloud storage buckets update gs://$BUCKET_NAME \\\n  --default-storage-class=NEARLINE\n"})}),"\n",(0,a.jsx)(n.h2,{id:"dual-region--multi-region",children:"Dual-Region / Multi-Region"}),"\n",(0,a.jsx)(n.p,{children:"For high availability:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Create multi-region bucket\ngcloud storage buckets create gs://$BUCKET_NAME \\\n  --location=US \\\n  --uniform-bucket-level-access\n\n# Create dual-region bucket\ngcloud storage buckets create gs://$BUCKET_NAME \\\n  --location=NAM4 \\\n  --uniform-bucket-level-access\n"})}),"\n",(0,a.jsx)(n.p,{children:"Location options:"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Examples"}),(0,a.jsx)(n.th,{children:"Use Case"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Region"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"us-west1"})}),(0,a.jsx)(n.td,{children:"Single region"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Dual-region"}),(0,a.jsxs)(n.td,{children:[(0,a.jsx)(n.code,{children:"NAM4"})," (Iowa + SC)"]}),(0,a.jsx)(n.td,{children:"HA within continent"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Multi-region"}),(0,a.jsxs)(n.td,{children:[(0,a.jsx)(n.code,{children:"US"}),", ",(0,a.jsx)(n.code,{children:"EU"}),", ",(0,a.jsx)(n.code,{children:"ASIA"})]}),(0,a.jsx)(n.td,{children:"Global access"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"object-lifecycle",children:"Object Lifecycle"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# View current lifecycle\ngcloud storage buckets describe gs://$BUCKET_NAME --format="json(lifecycle)"\n\n# Update lifecycle\ncat > lifecycle.json << \'EOF\'\n{\n  "lifecycle": {\n    "rule": [\n      {\n        "action": {"type": "SetStorageClass", "storageClass": "NEARLINE"},\n        "condition": {"age": 30, "matchesPrefix": ["production/"]}\n      },\n      {\n        "action": {"type": "Delete"},\n        "condition": {"age": 365}\n      },\n      {\n        "action": {"type": "Delete"},\n        "condition": {"numNewerVersions": 3}\n      }\n    ]\n  }\n}\nEOF\n\ngcloud storage buckets update gs://$BUCKET_NAME --lifecycle-file=lifecycle.json\n'})}),"\n",(0,a.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,a.jsx)(n.h3,{id:"enable-uniform-bucket-level-access",children:"Enable Uniform Bucket-Level Access"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"gcloud storage buckets update gs://$BUCKET_NAME \\\n  --uniform-bucket-level-access\n"})}),"\n",(0,a.jsx)(n.h3,{id:"enable-object-versioning",children:"Enable Object Versioning"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"gcloud storage buckets update gs://$BUCKET_NAME --versioning\n"})}),"\n",(0,a.jsx)(n.h3,{id:"configure-cmek-customer-managed-encryption-keys",children:"Configure CMEK (Customer-Managed Encryption Keys)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Create key ring\ngcloud kms keyrings create kafka-backup-ring \\\n  --location=us-west1 \\\n  --project=$PROJECT_ID\n\n# Create key\ngcloud kms keys create kafka-backup-key \\\n  --keyring=kafka-backup-ring \\\n  --location=us-west1 \\\n  --purpose=encryption \\\n  --project=$PROJECT_ID\n\n# Set bucket encryption\ngcloud storage buckets update gs://$BUCKET_NAME \\\n  --default-encryption-key=projects/$PROJECT_ID/locations/us-west1/keyRings/kafka-backup-ring/cryptoKeys/kafka-backup-key\n"})}),"\n",(0,a.jsx)(n.h3,{id:"enable-access-logging",children:"Enable Access Logging"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Create logging bucket\ngcloud storage buckets create gs://${BUCKET_NAME}-logs \\\n  --location=$REGION\n\n# Enable logging\ngcloud storage buckets update gs://$BUCKET_NAME \\\n  --log-bucket=gs://${BUCKET_NAME}-logs\n"})}),"\n",(0,a.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,a.jsx)(n.h3,{id:"verify-access",children:"Verify Access"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Test with gcloud\ngcloud storage ls gs://$BUCKET_NAME/\n\n# Test write\necho "test" | gcloud storage cp - gs://$BUCKET_NAME/test.txt\ngcloud storage rm gs://$BUCKET_NAME/test.txt\n\n# Test with gsutil\ngsutil ls gs://$BUCKET_NAME/\n'})}),"\n",(0,a.jsx)(n.h3,{id:"test-authentication",children:"Test Authentication"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Check active account\ngcloud auth list\n\n# Test with service account\ngcloud auth activate-service-account --key-file=kafka-backup-key.json\ngcloud storage ls gs://$BUCKET_NAME/\n"})}),"\n",(0,a.jsx)(n.h3,{id:"test-from-application",children:"Test from Application"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Set credentials\nexport GOOGLE_APPLICATION_CREDENTIALS="/path/to/kafka-backup-key.json"\n\n# Run backup\nkafka-backup backup --config backup.yaml\n\n# List backups\nkafka-backup list --path gs://$BUCKET_NAME/production/daily\n'})}),"\n",(0,a.jsx)(n.h2,{id:"kubernetes-deployment",children:"Kubernetes Deployment"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="deployment.yaml"',children:'apiVersion: batch/v1\nkind: CronJob\nmetadata:\n  name: kafka-backup\n  namespace: kafka-backup\nspec:\n  schedule: "0 2 * * *"\n  jobTemplate:\n    spec:\n      template:\n        spec:\n          serviceAccountName: kafka-backup  # For workload identity\n          containers:\n            - name: kafka-backup\n              image: ghcr.io/osodevops/kafka-backup:latest\n              args: ["backup", "--config", "/config/backup.yaml"]\n              volumeMounts:\n                - name: config\n                  mountPath: /config\n                # Only needed if not using workload identity:\n                # - name: gcp-sa\n                #   mountPath: /var/secrets/google\n              # env:\n              #   - name: GOOGLE_APPLICATION_CREDENTIALS\n              #     value: /var/secrets/google/key.json\n          volumes:\n            - name: config\n              configMap:\n                name: kafka-backup-config\n            # - name: gcp-sa\n            #   secret:\n            #     secretName: gcp-sa-key\n'})}),"\n",(0,a.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(n.h3,{id:"permission-denied",children:"Permission Denied"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Check IAM policy\ngcloud storage buckets get-iam-policy gs://$BUCKET_NAME\n\n# Check service account permissions\ngcloud projects get-iam-policy $PROJECT_ID \\\n  --filter="bindings.members:$SA_EMAIL" \\\n  --format="table(bindings.role)"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"workload-identity-issues",children:"Workload Identity Issues"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Verify workload identity binding\ngcloud iam service-accounts get-iam-policy $SA_EMAIL\n\n# Check pod service account annotation\nkubectl get sa kafka-backup -n kafka-backup -o yaml\n"})}),"\n",(0,a.jsx)(n.h3,{id:"slow-transfers",children:"Slow Transfers"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Use regional buckets close to your Kafka cluster"}),"\n",(0,a.jsx)(n.li,{children:"Enable parallel composite uploads"}),"\n",(0,a.jsx)(n.li,{children:"Check network bandwidth"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"../../reference/config-yaml",children:"Configuration Reference"})," - All storage options"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"../../guides/backup-to-s3",children:"Backup Guide"})," - Backup walkthrough"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"../../guides/performance-tuning",children:"Performance Tuning"})," - Optimize throughput"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);