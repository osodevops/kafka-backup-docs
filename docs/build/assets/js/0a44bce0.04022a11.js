"use strict";(globalThis.webpackChunkkafka_backup_docs=globalThis.webpackChunkkafka_backup_docs||[]).push([[9372],{8453:(a,e,n)=>{n.d(e,{R:()=>c,x:()=>t});var s=n(6540);const r={},i=s.createContext(r);function c(a){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof a?a(e):{...e,...a}},[e,a])}function t(a){let e;return e=a.disableParentContext?"function"==typeof a.components?a.components(r):a.components||r:c(a.components),s.createElement(i.Provider,{value:e},a.children)}},8810:(a,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>t,default:()=>k,frontMatter:()=>c,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"deployment/bare-metal","title":"Bare Metal Installation","description":"Install OSO Kafka Backup on bare metal servers and VMs","source":"@site/docs/deployment/bare-metal.md","sourceDirName":"deployment","slug":"/deployment/bare-metal","permalink":"/deployment/bare-metal","draft":false,"unlisted":false,"editUrl":"https://github.com/osodevops/kafka-backup-docs/tree/main/docs/docs/deployment/bare-metal.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Bare Metal Installation","description":"Install OSO Kafka Backup on bare metal servers and VMs","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Deployment Overview","permalink":"/deployment/"},"next":{"title":"Docker Deployment","permalink":"/deployment/docker"}}');var r=n(4848),i=n(8453);const c={title:"Bare Metal Installation",description:"Install OSO Kafka Backup on bare metal servers and VMs",sidebar_position:2},t="Bare Metal Installation",l={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Download",id:"download",level:2},{value:"Linux (x86_64)",id:"linux-x86_64",level:3},{value:"Linux (ARM64)",id:"linux-arm64",level:3},{value:"macOS",id:"macos",level:3},{value:"Directory Setup",id:"directory-setup",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Running Manually",id:"running-manually",level:2},{value:"Systemd Service",id:"systemd-service",level:2},{value:"Scheduled Backups with Systemd Timer",id:"scheduled-backups-with-systemd-timer",level:2},{value:"Scheduled Backups with Cron",id:"scheduled-backups-with-cron",level:2},{value:"Log Rotation",id:"log-rotation",level:2},{value:"Monitoring",id:"monitoring",level:2},{value:"Check Backup Status",id:"check-backup-status",level:3},{value:"Log Monitoring",id:"log-monitoring",level:3},{value:"Disk Space Monitoring",id:"disk-space-monitoring",level:3},{value:"NFS/Mounted Storage",id:"nfsmounted-storage",level:2},{value:"S3 Storage (Instead of Local)",id:"s3-storage-instead-of-local",level:2},{value:"Backup Rotation Script",id:"backup-rotation-script",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Permission Denied",id:"permission-denied",level:3},{value:"Connection Refused",id:"connection-refused",level:3},{value:"Out of Disk Space",id:"out-of-disk-space",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(a){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...a.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"bare-metal-installation",children:"Bare Metal Installation"})}),"\n",(0,r.jsx)(e.p,{children:"Install OSO Kafka Backup directly on Linux servers or virtual machines."}),"\n",(0,r.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Linux (x86_64 or ARM64) or macOS"}),"\n",(0,r.jsx)(e.li,{children:"Network access to Kafka brokers"}),"\n",(0,r.jsx)(e.li,{children:"Storage space for backups (local or mounted)"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"download",children:"Download"}),"\n",(0,r.jsx)(e.h3,{id:"linux-x86_64",children:"Linux (x86_64)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Download latest release\ncurl -L -o kafka-backup.tar.gz \\\n  https://github.com/osodevops/kafka-backup/releases/latest/download/kafka-backup-linux-amd64.tar.gz\n\n# Extract\ntar xzf kafka-backup.tar.gz\n\n# Move to PATH\nsudo mv kafka-backup /usr/local/bin/\n\n# Verify installation\nkafka-backup --version\n"})}),"\n",(0,r.jsx)(e.h3,{id:"linux-arm64",children:"Linux (ARM64)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"curl -L -o kafka-backup.tar.gz \\\n  https://github.com/osodevops/kafka-backup/releases/latest/download/kafka-backup-linux-arm64.tar.gz\n\ntar xzf kafka-backup.tar.gz\nsudo mv kafka-backup /usr/local/bin/\n"})}),"\n",(0,r.jsx)(e.h3,{id:"macos",children:"macOS"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Intel Mac\ncurl -L -o kafka-backup.tar.gz \\\n  https://github.com/osodevops/kafka-backup/releases/latest/download/kafka-backup-darwin-amd64.tar.gz\n\n# Apple Silicon (M1/M2)\ncurl -L -o kafka-backup.tar.gz \\\n  https://github.com/osodevops/kafka-backup/releases/latest/download/kafka-backup-darwin-arm64.tar.gz\n\ntar xzf kafka-backup.tar.gz\nsudo mv kafka-backup /usr/local/bin/\n"})}),"\n",(0,r.jsx)(e.h2,{id:"directory-setup",children:"Directory Setup"}),"\n",(0,r.jsx)(e.p,{children:"Create directories for configuration and data:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Create directories\nsudo mkdir -p /etc/kafka-backup\nsudo mkdir -p /var/lib/kafka-backup/data\nsudo mkdir -p /var/log/kafka-backup\n\n# Set permissions (create dedicated user)\nsudo useradd -r -s /bin/false kafka-backup\nsudo chown -R kafka-backup:kafka-backup /var/lib/kafka-backup\nsudo chown -R kafka-backup:kafka-backup /var/log/kafka-backup\n"})}),"\n",(0,r.jsx)(e.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(e.p,{children:"Create a backup configuration file:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'sudo tee /etc/kafka-backup/backup.yaml << \'EOF\'\nmode: backup\nbackup_id: "daily-backup"\n\nsource:\n  bootstrap_servers:\n    - kafka-1.example.com:9092\n    - kafka-2.example.com:9092\n    - kafka-3.example.com:9092\n  topics:\n    include:\n      - "*"\n    exclude:\n      - "__consumer_offsets"\n      - "_schemas"\n\nstorage:\n  backend: filesystem\n  path: "/var/lib/kafka-backup/data"\n\nbackup:\n  compression: zstd\n  compression_level: 3\n  checkpoint_interval_secs: 30\n  include_offset_headers: true\nEOF\n'})}),"\n",(0,r.jsx)(e.h2,{id:"running-manually",children:"Running Manually"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Run as the kafka-backup user\nsudo -u kafka-backup kafka-backup backup --config /etc/kafka-backup/backup.yaml\n\n# With verbose logging\nsudo -u kafka-backup kafka-backup -v backup --config /etc/kafka-backup/backup.yaml\n"})}),"\n",(0,r.jsx)(e.h2,{id:"systemd-service",children:"Systemd Service"}),"\n",(0,r.jsx)(e.p,{children:"Create a systemd service for automated backups:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo tee /etc/systemd/system/kafka-backup.service << 'EOF'\n[Unit]\nDescription=OSO Kafka Backup Service\nAfter=network.target\n\n[Service]\nType=oneshot\nUser=kafka-backup\nGroup=kafka-backup\nExecStart=/usr/local/bin/kafka-backup backup --config /etc/kafka-backup/backup.yaml\nStandardOutput=append:/var/log/kafka-backup/backup.log\nStandardError=append:/var/log/kafka-backup/backup.log\n\n# Security hardening\nNoNewPrivileges=yes\nProtectSystem=strict\nProtectHome=yes\nReadWritePaths=/var/lib/kafka-backup /var/log/kafka-backup\nPrivateTmp=yes\n\n[Install]\nWantedBy=multi-user.target\nEOF\n"})}),"\n",(0,r.jsx)(e.h2,{id:"scheduled-backups-with-systemd-timer",children:"Scheduled Backups with Systemd Timer"}),"\n",(0,r.jsx)(e.p,{children:"Create a timer for scheduled execution:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo tee /etc/systemd/system/kafka-backup.timer << 'EOF'\n[Unit]\nDescription=Run Kafka Backup daily at 2 AM\n\n[Timer]\nOnCalendar=*-*-* 02:00:00\nPersistent=true\nRandomizedDelaySec=300\n\n[Install]\nWantedBy=timers.target\nEOF\n"})}),"\n",(0,r.jsx)(e.p,{children:"Enable and start the timer:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo systemctl daemon-reload\nsudo systemctl enable kafka-backup.timer\nsudo systemctl start kafka-backup.timer\n\n# Check timer status\nsudo systemctl list-timers kafka-backup.timer\n"})}),"\n",(0,r.jsx)(e.h2,{id:"scheduled-backups-with-cron",children:"Scheduled Backups with Cron"}),"\n",(0,r.jsx)(e.p,{children:"Alternative to systemd timer:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Edit crontab for kafka-backup user\nsudo -u kafka-backup crontab -e\n\n# Add daily backup at 2 AM\n0 2 * * * /usr/local/bin/kafka-backup backup --config /etc/kafka-backup/backup.yaml >> /var/log/kafka-backup/backup.log 2>&1\n"})}),"\n",(0,r.jsx)(e.h2,{id:"log-rotation",children:"Log Rotation"}),"\n",(0,r.jsx)(e.p,{children:"Configure log rotation:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo tee /etc/logrotate.d/kafka-backup << 'EOF'\n/var/log/kafka-backup/*.log {\n    daily\n    rotate 14\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 640 kafka-backup kafka-backup\n}\nEOF\n"})}),"\n",(0,r.jsx)(e.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,r.jsx)(e.h3,{id:"check-backup-status",children:"Check Backup Status"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# List backups\nkafka-backup list --path /var/lib/kafka-backup/data\n\n# Describe latest backup\nkafka-backup describe --path /var/lib/kafka-backup/data --backup-id daily-backup\n\n# Validate backup integrity\nkafka-backup validate --path /var/lib/kafka-backup/data --backup-id daily-backup\n"})}),"\n",(0,r.jsx)(e.h3,{id:"log-monitoring",children:"Log Monitoring"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Follow backup logs\ntail -f /var/log/kafka-backup/backup.log\n\n# Check for errors\ngrep -i error /var/log/kafka-backup/backup.log\n"})}),"\n",(0,r.jsx)(e.h3,{id:"disk-space-monitoring",children:"Disk Space Monitoring"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check backup storage usage\ndu -sh /var/lib/kafka-backup/data/*\n\n# Monitor with df\ndf -h /var/lib/kafka-backup\n"})}),"\n",(0,r.jsx)(e.h2,{id:"nfsmounted-storage",children:"NFS/Mounted Storage"}),"\n",(0,r.jsx)(e.p,{children:"For shared or network storage:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# Mount NFS volume\nsudo mount -t nfs nfs-server:/kafka-backups /var/lib/kafka-backup/data\n\n# Add to /etc/fstab for persistence\necho "nfs-server:/kafka-backups /var/lib/kafka-backup/data nfs defaults 0 0" | sudo tee -a /etc/fstab\n\n# Update configuration\nstorage:\n  backend: filesystem\n  path: "/var/lib/kafka-backup/data"\n'})}),"\n",(0,r.jsx)(e.h2,{id:"s3-storage-instead-of-local",children:"S3 Storage (Instead of Local)"}),"\n",(0,r.jsx)(e.p,{children:"For cloud storage:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# Set AWS credentials\nexport AWS_ACCESS_KEY_ID="AKIA..."\nexport AWS_SECRET_ACCESS_KEY="..."\nexport AWS_REGION="us-west-2"\n\n# Or use instance profile (recommended)\n# No credentials needed if running on EC2 with IAM role\n'})}),"\n",(0,r.jsx)(e.p,{children:"Update configuration:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"storage:\n  backend: s3\n  bucket: my-kafka-backups\n  region: us-west-2\n  prefix: production/daily\n"})}),"\n",(0,r.jsx)(e.h2,{id:"backup-rotation-script",children:"Backup Rotation Script"}),"\n",(0,r.jsx)(e.p,{children:"Create a script to manage backup retention:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'sudo tee /usr/local/bin/kafka-backup-rotate << \'EOF\'\n#!/bin/bash\nBACKUP_PATH="/var/lib/kafka-backup/data"\nRETENTION_DAYS=30\n\n# List backups older than retention period\nfind "$BACKUP_PATH" -maxdepth 1 -type d -mtime +$RETENTION_DAYS -name "backup-*" | while read dir; do\n    echo "Removing old backup: $dir"\n    rm -rf "$dir"\ndone\n\n# Log disk usage\necho "Current disk usage:"\ndu -sh "$BACKUP_PATH"/*\nEOF\n\nchmod +x /usr/local/bin/kafka-backup-rotate\n\n# Add to cron (run daily at 3 AM)\necho "0 3 * * * /usr/local/bin/kafka-backup-rotate >> /var/log/kafka-backup/rotation.log 2>&1" | sudo -u kafka-backup crontab -\n'})}),"\n",(0,r.jsx)(e.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(e.h3,{id:"permission-denied",children:"Permission Denied"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check file ownership\nls -la /var/lib/kafka-backup/\n\n# Fix permissions\nsudo chown -R kafka-backup:kafka-backup /var/lib/kafka-backup/\n"})}),"\n",(0,r.jsx)(e.h3,{id:"connection-refused",children:"Connection Refused"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Test Kafka connectivity\nnc -zv kafka-1.example.com 9092\n\n# Check firewall\nsudo iptables -L -n | grep 9092\n"})}),"\n",(0,r.jsx)(e.h3,{id:"out-of-disk-space",children:"Out of Disk Space"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check disk usage\ndf -h /var/lib/kafka-backup\n\n# Find large backups\ndu -sh /var/lib/kafka-backup/data/*\n\n# Remove old backups\nkafka-backup list --path /var/lib/kafka-backup/data\nrm -rf /var/lib/kafka-backup/data/old-backup-001\n"})}),"\n",(0,r.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"../reference/config-yaml",children:"Configuration Reference"})," - All configuration options"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"../guides/security-setup",children:"Security Setup"})," - TLS and SASL configuration"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"../guides/performance-tuning",children:"Performance Tuning"})," - Optimize backup speed"]}),"\n"]})]})}function k(a={}){const{wrapper:e}={...(0,i.R)(),...a.components};return e?(0,r.jsx)(e,{...a,children:(0,r.jsx)(d,{...a})}):d(a)}}}]);