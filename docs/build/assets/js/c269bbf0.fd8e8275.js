"use strict";(globalThis.webpackChunkkafka_backup_docs=globalThis.webpackChunkkafka_backup_docs||[]).push([[6637],{4454:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"getting-started/first-backup","title":"First Backup Tutorial","description":"Complete step-by-step guide to backing up and restoring your first Kafka topic","source":"@site/docs/getting-started/first-backup.md","sourceDirName":"getting-started","slug":"/getting-started/first-backup","permalink":"/getting-started/first-backup","draft":false,"unlisted":false,"editUrl":"https://github.com/osodevops/kafka-backup-docs/tree/main/docs/docs/getting-started/first-backup.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"First Backup Tutorial","description":"Complete step-by-step guide to backing up and restoring your first Kafka topic","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"CLI Basics","permalink":"/getting-started/cli-basics"},"next":{"title":"Disaster Recovery","permalink":"/use-cases/disaster-recovery"}}');var s=t(4848),a=t(8453);const i={title:"First Backup Tutorial",description:"Complete step-by-step guide to backing up and restoring your first Kafka topic",sidebar_position:4},o="Your First Backup",c={},d=[{value:"What You&#39;ll Learn",id:"what-youll-learn",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Plan Your Backup",id:"step-1-plan-your-backup",level:2},{value:"Step 2: Create the Backup Configuration",id:"step-2-create-the-backup-configuration",level:2},{value:"Configuration Explained",id:"configuration-explained",level:3},{value:"Step 3: Run the Backup",id:"step-3-run-the-backup",level:2},{value:"Expected Output",id:"expected-output",level:3},{value:"Step 4: Verify the Backup",id:"step-4-verify-the-backup",level:2},{value:"List Backups",id:"list-backups",level:3},{value:"Get Detailed Information",id:"get-detailed-information",level:3},{value:"Validate Integrity",id:"validate-integrity",level:3},{value:"Step 5: Create a Restore Configuration",id:"step-5-create-a-restore-configuration",level:2},{value:"Step 6: Validate Before Restore",id:"step-6-validate-before-restore",level:2},{value:"Step 7: Execute the Restore",id:"step-7-execute-the-restore",level:2},{value:"Step 8: Handle Consumer Offsets",id:"step-8-handle-consumer-offsets",level:2},{value:"Option A: Manual Reset Using Kafka Tools",id:"option-a-manual-reset-using-kafka-tools",level:3},{value:"Option B: Automated Reset with Kafka Backup",id:"option-b-automated-reset-with-kafka-backup",level:3},{value:"Option C: Three-Phase Restore (All-in-One)",id:"option-c-three-phase-restore-all-in-one",level:3},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"your-first-backup",children:"Your First Backup"})}),"\n",(0,s.jsx)(n.p,{children:"This tutorial walks you through a complete backup and restore cycle, explaining each step in detail."}),"\n",(0,s.jsx)(n.h2,{id:"what-youll-learn",children:"What You'll Learn"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"How to create a backup configuration"}),"\n",(0,s.jsx)(n.li,{children:"How to run a backup operation"}),"\n",(0,s.jsx)(n.li,{children:"How to verify backup integrity"}),"\n",(0,s.jsx)(n.li,{children:"How to restore from backup"}),"\n",(0,s.jsx)(n.li,{children:"How to handle consumer group offsets"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["OSO Kafka Backup installed (",(0,s.jsx)(n.a,{href:"../deployment",children:"Installation Guide"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Access to a Kafka cluster"}),"\n",(0,s.jsx)(n.li,{children:"Storage location (local path or cloud bucket)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"step-1-plan-your-backup",children:"Step 1: Plan Your Backup"}),"\n",(0,s.jsx)(n.p,{children:"Before creating a backup, decide:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Which topics to back up?"})," You can use explicit names or patterns"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Where to store backups?"})," Local filesystem, S3, Azure, or GCS"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"What compression to use?"})," Zstd (best ratio), LZ4 (fastest), or none"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Starting offset?"})," From earliest (full backup) or latest (incremental)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"step-2-create-the-backup-configuration",children:"Step 2: Create the Backup Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Create a file named ",(0,s.jsx)(n.code,{children:"backup.yaml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="backup.yaml"',children:'# Backup mode\nmode: backup\n\n# Unique identifier for this backup\nbackup_id: "production-backup-001"\n\n# Source Kafka cluster\nsource:\n  bootstrap_servers:\n    - broker-1.kafka.svc:9092\n    - broker-2.kafka.svc:9092\n    - broker-3.kafka.svc:9092\n\n  # Optional: Security configuration\n  # security:\n  #   security_protocol: SASL_SSL\n  #   sasl_mechanism: SCRAM-SHA-256\n  #   sasl_username: backup-user\n  #   sasl_password: ${KAFKA_PASSWORD}  # Environment variable\n\n  # Topics to back up\n  topics:\n    include:\n      - orders           # Explicit topic name\n      - payments         # Another topic\n      - "events-*"       # Wildcard pattern\n    exclude:\n      - "__consumer_offsets"  # Internal topics\n      - "_schemas"            # Schema registry topic\n\n# Storage destination\nstorage:\n  backend: filesystem    # Options: filesystem, s3, azure, gcs\n  path: "/var/lib/kafka-backup/data"\n  # For S3:\n  # backend: s3\n  # bucket: my-backup-bucket\n  # region: us-west-2\n  # prefix: kafka-backups/production\n\n# Backup settings\nbackup:\n  # Compression\n  compression: zstd      # Options: zstd, lz4, none\n  compression_level: 3   # 1-22 for zstd (higher = better ratio, slower)\n\n  # Starting point\n  start_offset: earliest # Options: earliest, latest\n\n  # Segment settings\n  segment_max_bytes: 134217728    # 128 MB per segment\n  segment_max_interval_ms: 60000  # Force segment roll every 60s\n\n  # Checkpointing for resumable backups\n  checkpoint_interval_secs: 30\n\n  # Include offset headers (required for offset reset)\n  include_offset_headers: true\n\n  # Source cluster identifier (for tracking)\n  source_cluster_id: "production-cluster"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"configuration-explained",children:"Configuration Explained"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Setting"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"backup_id"})}),(0,s.jsx)(n.td,{children:"Unique name for this backup; used for restore"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bootstrap_servers"})}),(0,s.jsx)(n.td,{children:"Kafka broker addresses"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"topics.include"})}),(0,s.jsx)(n.td,{children:"Topics to back up (names or patterns)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"topics.exclude"})}),(0,s.jsx)(n.td,{children:"Topics to skip"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"compression"})}),(0,s.jsx)(n.td,{children:"Reduce storage size and costs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"start_offset: earliest"})}),(0,s.jsx)(n.td,{children:"Back up all data from beginning"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"checkpoint_interval_secs"})}),(0,s.jsx)(n.td,{children:"How often to save progress"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"include_offset_headers"})}),(0,s.jsx)(n.td,{children:"Store original offsets for consumer reset"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"step-3-run-the-backup",children:"Step 3: Run the Backup"}),"\n",(0,s.jsx)(n.p,{children:"Execute the backup:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kafka-backup backup --config backup.yaml\n"})}),"\n",(0,s.jsx)(n.p,{children:"With verbose logging:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kafka-backup -v backup --config backup.yaml\n"})}),"\n",(0,s.jsx)(n.h3,{id:"expected-output",children:"Expected Output"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[2024-12-03T10:00:00Z INFO] Starting backup: production-backup-001\n[2024-12-03T10:00:00Z INFO] Connecting to Kafka cluster...\n[2024-12-03T10:00:01Z INFO] Connected to cluster: production-cluster\n[2024-12-03T10:00:01Z INFO] Discovered topics matching patterns:\n  - orders (6 partitions)\n  - payments (3 partitions)\n  - events-clickstream (12 partitions)\n  - events-pageviews (12 partitions)\n\n[2024-12-03T10:00:02Z INFO] Starting backup of 4 topics, 33 partitions\n[2024-12-03T10:00:02Z INFO] Topic: orders\n  Partition 0: 150,234 records (earliest: 0, latest: 150233)\n  Partition 1: 148,892 records\n  ...\n\n[2024-12-03T10:05:32Z INFO] Backup completed successfully\n[2024-12-03T10:05:32Z INFO] Summary:\n  Topics: 4\n  Partitions: 33\n  Records: 2,456,789\n  Uncompressed: 1.2 GB\n  Compressed: 245 MB\n  Compression ratio: 4.9x\n  Duration: 5m 30s\n  Throughput: 7,445 records/sec\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-4-verify-the-backup",children:"Step 4: Verify the Backup"}),"\n",(0,s.jsx)(n.h3,{id:"list-backups",children:"List Backups"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kafka-backup list --path /var/lib/kafka-backup/data\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Available Backups:\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  production-backup-001\n    Created:     2024-12-03T10:00:00Z\n    Source:      production-cluster\n    Topics:      4\n    Partitions:  33\n    Records:     2,456,789\n    Size:        245 MB (compressed)\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n"})}),"\n",(0,s.jsx)(n.h3,{id:"get-detailed-information",children:"Get Detailed Information"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kafka-backup describe --path /var/lib/kafka-backup/data --backup-id production-backup-001\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Backup: production-backup-001\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nMetadata:\n  Created:           2024-12-03T10:00:00Z\n  Source Cluster:    production-cluster\n  Compression:       zstd (level 3)\n\nStatistics:\n  Topics:            4\n  Partitions:        33\n  Segments:          156\n  Records:           2,456,789\n  Uncompressed:      1.2 GB\n  Compressed:        245 MB\n  Compression Ratio: 4.9x\n\nTime Range:\n  Earliest Message:  2024-11-01T00:00:00Z\n  Latest Message:    2024-12-03T09:59:59Z\n\nTopics:\n  orders           6 partitions    523,456 records\n  payments         3 partitions    234,567 records\n  events-click    12 partitions    890,123 records\n  events-pages    12 partitions    808,643 records\n"})}),"\n",(0,s.jsx)(n.h3,{id:"validate-integrity",children:"Validate Integrity"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Quick validation\nkafka-backup validate --path /var/lib/kafka-backup/data --backup-id production-backup-001\n\n# Deep validation (reads all data)\nkafka-backup validate --path /var/lib/kafka-backup/data --backup-id production-backup-001 --deep\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Validation Report: production-backup-001\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nSegments:\n  Checked:    156\n  Valid:      156\n  Missing:    0\n  Corrupted:  0\n\nRecords Validated: 2,456,789\n\nResult: \u2713 VALID\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-5-create-a-restore-configuration",children:"Step 5: Create a Restore Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"restore.yaml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="restore.yaml"',children:'mode: restore\nbackup_id: "production-backup-001"\n\n# Target Kafka cluster (can be different from source)\ntarget:\n  bootstrap_servers:\n    - dr-broker-1.kafka.svc:9092\n    - dr-broker-2.kafka.svc:9092\n\nstorage:\n  backend: filesystem\n  path: "/var/lib/kafka-backup/data"\n\nrestore:\n  # Optional: Point-in-time recovery\n  # time_window_start: 1701417600000  # Unix ms timestamp\n  # time_window_end: 1701504000000\n\n  # Optional: Topic remapping\n  # topic_mapping:\n  #   orders: orders_restored\n  #   payments: payments_dr\n\n  # Consumer offset handling\n  consumer_group_strategy: skip  # Options: skip, header-based, manual\n\n  # Include original offset in headers (for manual consumer reset)\n  include_original_offset_header: true\n\n  # Dry run first to validate\n  dry_run: false\n'})}),"\n",(0,s.jsx)(n.h2,{id:"step-6-validate-before-restore",children:"Step 6: Validate Before Restore"}),"\n",(0,s.jsx)(n.p,{children:"Always validate a restore configuration before executing:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kafka-backup validate-restore --config restore.yaml\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Restore Validation Report\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nStatus: \u2713 VALID\n\nBackup:\n  ID: production-backup-001\n  Source: production-cluster\n\nTarget Cluster:\n  Brokers: dr-broker-1.kafka.svc:9092, dr-broker-2.kafka.svc:9092\n  Connection: \u2713 OK\n\nTopics to Restore:\n  orders      \u2192 orders      (6 partitions)\n  payments    \u2192 payments    (3 partitions)\n  events-*    \u2192 events-*    (24 partitions)\n\nData:\n  Segments: 156\n  Records: 2,456,789\n  Estimated Size: 1.2 GB (uncompressed)\n\nWarnings:\n  - Topic 'orders' exists on target with 6 partitions (will append data)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-7-execute-the-restore",children:"Step 7: Execute the Restore"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kafka-backup restore --config restore.yaml\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[2024-12-03T11:00:00Z INFO] Starting restore from: production-backup-001\n[2024-12-03T11:00:01Z INFO] Connected to target cluster\n[2024-12-03T11:00:02Z INFO] Restoring 4 topics, 33 partitions\n\n[2024-12-03T11:00:02Z INFO] Topic: orders\n  Partition 0: Restoring 150,234 records...\n  Partition 0: \u2713 Complete\n  ...\n\n[2024-12-03T11:08:45Z INFO] Restore completed successfully\n[2024-12-03T11:08:45Z INFO] Summary:\n  Records Restored: 2,456,789\n  Duration: 8m 43s\n  Throughput: 4,698 records/sec\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-8-handle-consumer-offsets",children:"Step 8: Handle Consumer Offsets"}),"\n",(0,s.jsx)(n.p,{children:"After restore, consumer groups need their offsets updated. There are several strategies:"}),"\n",(0,s.jsx)(n.h3,{id:"option-a-manual-reset-using-kafka-tools",children:"Option A: Manual Reset Using Kafka Tools"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# View offset mapping from backup\nkafka-backup show-offset-mapping \\\n  --path /var/lib/kafka-backup/data \\\n  --backup-id production-backup-001 \\\n  --format text\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Offset Mapping: production-backup-001\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTopic       Partition  Source Start  Source End  Records\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\norders      0          0             150233      150234\norders      1          0             148891      148892\npayments    0          0             78234       78235\n...\n\nTo reset consumer groups, use:\nkafka-consumer-groups --bootstrap-server <broker> \\\n  --group <group-name> \\\n  --topic orders:0 \\\n  --reset-offsets --to-offset 150233 --execute\n"})}),"\n",(0,s.jsx)(n.h3,{id:"option-b-automated-reset-with-kafka-backup",children:"Option B: Automated Reset with Kafka Backup"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Generate a reset plan\nkafka-backup offset-reset plan \\\n  --path /var/lib/kafka-backup/data \\\n  --backup-id production-backup-001 \\\n  --groups my-consumer-group,analytics-group \\\n  --bootstrap-servers dr-broker-1:9092\n\n# Execute the reset\nkafka-backup offset-reset execute \\\n  --path /var/lib/kafka-backup/data \\\n  --backup-id production-backup-001 \\\n  --groups my-consumer-group \\\n  --bootstrap-servers dr-broker-1:9092\n"})}),"\n",(0,s.jsx)(n.h3,{id:"option-c-three-phase-restore-all-in-one",children:"Option C: Three-Phase Restore (All-in-One)"}),"\n",(0,s.jsx)(n.p,{children:"For disaster recovery, use the three-phase restore which handles everything:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="dr-restore.yaml"',children:'mode: restore\nbackup_id: "production-backup-001"\n\ntarget:\n  bootstrap_servers:\n    - dr-broker-1:9092\n\nstorage:\n  backend: filesystem\n  path: "/var/lib/kafka-backup/data"\n\nrestore:\n  consumer_group_strategy: header-based\n  reset_consumer_offsets: true\n  consumer_groups:\n    - my-consumer-group\n    - analytics-group\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kafka-backup three-phase-restore --config dr-restore.yaml\n"})}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"You've learned how to:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create a backup configuration"})," with topic selection, compression, and checkpointing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Execute and monitor a backup"})," operation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Verify backup integrity"})," with validation commands"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Plan and execute a restore"})," with optional PITR"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Handle consumer group offsets"})," after restore"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"../guides/backup-to-s3",children:"Backup to S3"})})," - Store backups in cloud storage"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"../guides/restore-pitr",children:"Point-in-Time Recovery"})})," - Restore to specific timestamps"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"../guides/offset-management",children:"Offset Management"})})," - Advanced consumer offset handling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"../guides/performance-tuning",children:"Performance Tuning"})})," - Optimize throughput"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"../operator",children:"Kubernetes Operator"})})," - Automated scheduled backups"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var r=t(6540);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);